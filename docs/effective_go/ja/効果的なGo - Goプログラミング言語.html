<!DOCTYPE html>
<!-- saved from url=(0031)https://go.dev/doc/effective_go -->
<html lang="ja" data-theme="auto" class="translated-ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<link rel="preconnect" href="https://www.googletagmanager.com/">
<script type="text/javascript" async="" src="./効果的なGo - Goプログラミング言語_files/analytics.js.ダウンロード"></script><script type="text/javascript" async="" src="./効果的なGo - Goプログラミング言語_files/js"></script><script async="" src="./効果的なGo - Goプログラミング言語_files/gtm.js.ダウンロード"></script><script async="" src="./効果的なGo - Goプログラミング言語_files/gtm.js.ダウンロード"></script><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-W8MVQXG');</script>
  

<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#00add8">
<link rel="stylesheet" href="./効果的なGo - Goプログラミング言語_files/css">
<link rel="stylesheet" href="./効果的なGo - Goプログラミング言語_files/styles.css">
<link rel="icon" href="https://go.dev/images/favicon-gopher.png" sizes="any">
<link rel="apple-touch-icon" href="https://go.dev/images/favicon-gopher-plain.png">
<link rel="icon" href="https://go.dev/images/favicon-gopher.svg" type="image/svg+xml">
<link rel="me" href="https://hachyderm.io/@golang">

  
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-W8MVQXG');</script>
  
<script src="./効果的なGo - Goプログラミング言語_files/site.js.ダウンロード"></script>
<meta name="og:url" content="https://go.dev/doc/effective_go">
<meta name="og:title" content="Effective Go - The Go Programming Language">
<title>効果的なGo - Goプログラミング言語</title>

<meta name="og:image" content="https://go.dev/doc/gopher/gopher5logo.jpg">
<meta name="twitter:image" content="https://go.dev/doc/gopher/gopherbelly300.jpg">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@golang">
<link type="text/css" rel="stylesheet" charset="UTF-8" href="./効果的なGo - Goプログラミング言語_files/m=el_main_css"></head>
<body class="Site">
  
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W8MVQXG"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  


<header class="Site-header js-siteHeader">
  <div class="Header Header--dark">
    <nav class="Header-nav">
      <a href="https://go.dev/">
        <img class="js-headerLogo Header-logo" src="./効果的なGo - Goプログラミング言語_files/go-logo-white.svg" alt="行く">
      </a>
      <div class="skip-navigation-wrapper">
        <a class="skip-to-content-link" aria-label="メインコンテンツへスキップ" href="https://go.dev/doc/effective_go#main-content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メインコンテンツへスキップ</font></font></a>
      </div>
      <div class="Header-rightContent">
        <ul class="Header-menu">
          <li class="Header-menuItem ">
            <a href="https://go.dev/doc/effective_go#" class="js-desktop-menu-hover" aria-label="なぜ行くのか" aria-describedby="dropdown-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              なぜ行くのか</font></font><i class="material-icons" aria-hidden="true"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">矢印ドロップダウン</font></font></i>
            </a>
            <div class="screen-reader-only" id="dropdown-description" hidden=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              Enterキーを押してドロップダウンを有効/無効にします
            </font></font></div>
              <ul class="Header-submenu js-desktop-submenu-hover" aria-label="サブメニュー">
                  <li class="Header-submenuItem">
                    <div>
                        <a href="https://go.dev/solutions/case-studies"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          ケーススタディ
                          
                        </font></font></a>
                    </div>
                    <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">企業がGoで解決する一般的な問題</font></font></p>
                  </li>
                  <li class="Header-submenuItem">
                    <div>
                        <a href="https://go.dev/solutions/use-cases"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          ユースケース
                          
                        </font></font></a>
                    </div>
                    <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">企業がGoをどのように、そしてなぜ利用しているのかについてのストーリー</font></font></p>
                  </li>
                  <li class="Header-submenuItem">
                    <div>
                        <a href="https://go.dev/security/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          安全
                          
                        </font></font></a>
                    </div>
                    <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go がデフォルトでセキュリティを維持する方法</font></font></p>
                  </li>
              </ul>
          </li>
          <li class="Header-menuItem ">
            <a href="https://go.dev/learn/" aria-label="学ぶ" aria-describedby="dropdown-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              学ぶ 
            </font></font></a>
            <div class="screen-reader-only" id="dropdown-description" hidden=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              Enterキーを押してドロップダウンを有効/無効にします
            </font></font></div>
          </li>
          <li class="Header-menuItem  Header-menuItem--active">
            <a href="https://go.dev/doc/effective_go#" class="js-desktop-menu-hover" aria-label="ドキュメント" aria-describedby="dropdown-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              ドキュメント</font></font><i class="material-icons" aria-hidden="true"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">矢印ドロップダウン</font></font></i>
            </a>
            <div class="screen-reader-only" id="dropdown-description" hidden=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              Enterキーを押してドロップダウンを有効/無効にします
            </font></font></div>
              <ul class="Header-submenu js-desktop-submenu-hover" aria-label="サブメニュー">
                  <li class="Header-submenuItem">
                    <div>
                        <a href="https://go.dev/doc/effective_go"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          効果的な囲碁
                          
                        </font></font></a>
                    </div>
                    <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">明確でパフォーマンスが高く、慣用的な Go コードを書くためのヒント</font></font></p>
                  </li>
                  <li class="Header-submenuItem">
                    <div>
                        <a href="https://go.dev/doc"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          Go ユーザーマニュアル
                          
                        </font></font></a>
                    </div>
                    <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Goを使ったソフトウェア構築の完全入門</font></font></p>
                  </li>
                  <li class="Header-submenuItem">
                    <div>
                        <a href="https://pkg.go.dev/std"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          標準ライブラリ
                          
                        </font></font></a>
                    </div>
                    <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Goの標準ライブラリのリファレンスドキュメント</font></font></p>
                  </li>
                  <li class="Header-submenuItem">
                    <div>
                        <a href="https://go.dev/doc/devel/release"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          リリースノート
                          
                        </font></font></a>
                    </div>
                    <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Goの各リリースの新機能について学ぶ</font></font></p>
                  </li>
              </ul>
          </li>
          <li class="Header-menuItem ">
            <a href="https://pkg.go.dev/" aria-label="パッケージ" aria-describedby="dropdown-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              パッケージ 
            </font></font></a>
            <div class="screen-reader-only" id="dropdown-description" hidden=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              Enterキーを押してドロップダウンを有効/無効にします
            </font></font></div>
          </li>
          <li class="Header-menuItem ">
            <a href="https://go.dev/doc/effective_go#" class="js-desktop-menu-hover forced-open" aria-label="コミュニティ" aria-describedby="dropdown-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              コミュニティ</font></font><i class="material-icons" aria-hidden="true"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">矢印ドロップダウン</font></font></i>
            </a>
            <div class="screen-reader-only" id="dropdown-description" hidden=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              Enterキーを押してドロップダウンを有効/無効にします
            </font></font></div>
              <ul class="Header-submenu js-desktop-submenu-hover" aria-label="サブメニュー">
                  <li class="Header-submenuItem">
                    <div>
                        <a href="https://go.dev/talks/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          録音された講演
                          
                        </font></font></a>
                    </div>
                    <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">過去のイベントのビデオ</font></font></p>
                  </li>
                  <li class="Header-submenuItem">
                    <div>
                        <a href="https://www.meetup.com/pro/go"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          ミートアップ
                           </font></font><i class="material-icons"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新規で開く</font></font></i>
                        </a>
                    </div>
                    <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他の地元のGo開発者と出会う</font></font></p>
                  </li>
                  <li class="Header-submenuItem">
                    <div>
                        <a href="https://go.dev/wiki/Conferences"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          会議
                           </font></font><i class="material-icons"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新規で開く</font></font></i>
                        </a>
                    </div>
                    <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">世界中の Go 開発者と学び、ネットワークを構築しましょう</font></font></p>
                  </li>
                  <li class="Header-submenuItem">
                    <div>
                        <a href="https://go.dev/blog"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          ブログに行く
                          
                        </font></font></a>
                    </div>
                    <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go プロジェクトの公式ブログ。</font></font></p>
                  </li>
                  <li class="Header-submenuItem">
                    <div>
                        <a href="https://go.dev/help"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          Goプロジェクト
                          
                        </font></font></a>
                    </div>
                    <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go からヘルプと最新情報を入手</font></font></p>
                  </li>
                  <li class="Header-submenuItem">
                    <div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        接続する
                    </font></font></div>
                    <p></p>
                      <div class="Header-socialIcons">
                        
                        <a class="Header-socialIcon" aria-label="Google グループに接続する (新しいウィンドウで開きます)" href="https://groups.google.com/g/golang-nuts"><img src="./効果的なGo - Goプログラミング言語_files/google-groups.svg"></a>
                        <a class="Header-socialIcon" aria-label="github に接続する (新しいウィンドウで開きます)" href="https://github.com/golang"><img src="./効果的なGo - Goプログラミング言語_files/github.svg"></a>
                        <a class="Header-socialIcon" aria-label="Twitter に接続する (新しいウィンドウで開きます)" href="https://twitter.com/golang"><img src="./効果的なGo - Goプログラミング言語_files/twitter.svg"></a>
                        <a class="Header-socialIcon" aria-label="Redditに接続する（新しいウィンドウで開く）" href="https://www.reddit.com/r/golang/"><img src="./効果的なGo - Goプログラミング言語_files/reddit.svg"></a>
                        <a class="Header-socialIcon" aria-label="Slack で接続する (新しいウィンドウで開きます)" href="https://invite.slack.golangbridge.org/"><img src="./効果的なGo - Goプログラミング言語_files/slack.svg"></a>
                        <a class="Header-socialIcon" aria-label="Stack Overflow に接続する (新しいウィンドウで開きます)" href="https://stackoverflow.com/tags/go"><img src="./効果的なGo - Goプログラミング言語_files/stack-overflow.svg"></a>
                      </div>
                  </li>
              </ul>
          </li>
        </ul>
        <button class="Header-navOpen js-headerMenuButton Header-navOpen--white" aria-label="ナビゲーションを開きます。">
        </button>
      </div>
    </nav>
    
  </div>
</header>
<aside class="NavigationDrawer js-header">
  <nav class="NavigationDrawer-nav">
    <div class="NavigationDrawer-header">
      <a href="https://go.dev/" tabindex="-1">
        <img class="NavigationDrawer-logo" src="./効果的なGo - Goプログラミング言語_files/go-logo-blue.svg" alt="行く。">
      </a>
    </div>
    <ul class="NavigationDrawer-list">
        
          <li class="NavigationDrawer-listItem js-mobile-subnav-trigger  NavigationDrawer-hasSubnav">
            <a href="https://go.dev/doc/effective_go#" tabindex="-1"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">なぜ行くのか</font></font></span> <i class="material-icons"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次へ移動</font></font></i></a>

            <div class="NavigationDrawer NavigationDrawer-submenuItem">
              <nav class="NavigationDrawer-nav">
                <div class="NavigationDrawer-header">
                  <a href="https://go.dev/doc/effective_go#" tabindex="-1"><i class="material-icons"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ナビゲート前</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">なぜ行くのか</font></font></a>
                </div>
                <ul class="NavigationDrawer-list">
                    <li class="NavigationDrawer-listItem">
                        <a href="https://go.dev/solutions/case-studies" tabindex="-1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          ケーススタディ
                          
                        </font></font></a>
                      
                    </li>
                    <li class="NavigationDrawer-listItem">
                        <a href="https://go.dev/solutions/use-cases" tabindex="-1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          ユースケース
                          
                        </font></font></a>
                      
                    </li>
                    <li class="NavigationDrawer-listItem">
                        <a href="https://go.dev/security/" tabindex="-1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          安全
                          
                        </font></font></a>
                      
                    </li>
                </ul>
              </nav></div>
            
          </li>

        
        
          <li class="NavigationDrawer-listItem ">
            <a href="https://go.dev/learn/" tabindex="-1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">学ぶ</font></font></a>
          </li>
        
        
          <li class="NavigationDrawer-listItem js-mobile-subnav-trigger  NavigationDrawer-listItem--active NavigationDrawer-hasSubnav">
            <a href="https://go.dev/doc/effective_go#" tabindex="-1"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメント</font></font></span> <i class="material-icons"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次へ移動</font></font></i></a>

            <div class="NavigationDrawer NavigationDrawer-submenuItem">
              <nav class="NavigationDrawer-nav">
                <div class="NavigationDrawer-header">
                  <a href="https://go.dev/doc/effective_go#" tabindex="-1"><i class="material-icons"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ナビゲート前</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメント</font></font></a>
                </div>
                <ul class="NavigationDrawer-list">
                    <li class="NavigationDrawer-listItem">
                        <a href="https://go.dev/doc/effective_go" tabindex="-1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          効果的な囲碁
                          
                        </font></font></a>
                      
                    </li>
                    <li class="NavigationDrawer-listItem">
                        <a href="https://go.dev/doc" tabindex="-1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          Go ユーザーマニュアル
                          
                        </font></font></a>
                      
                    </li>
                    <li class="NavigationDrawer-listItem">
                        <a href="https://pkg.go.dev/std" tabindex="-1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          標準ライブラリ
                          
                        </font></font></a>
                      
                    </li>
                    <li class="NavigationDrawer-listItem">
                        <a href="https://go.dev/doc/devel/release" tabindex="-1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          リリースノート
                          
                        </font></font></a>
                      
                    </li>
                </ul>
              </nav></div>
            
          </li>

        
        
          <li class="NavigationDrawer-listItem ">
            <a href="https://pkg.go.dev/" tabindex="-1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッケージ</font></font></a>
          </li>
        
        
          <li class="NavigationDrawer-listItem js-mobile-subnav-trigger  NavigationDrawer-hasSubnav">
            <a href="https://go.dev/doc/effective_go#" tabindex="-1"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コミュニティ</font></font></span> <i class="material-icons"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次へ移動</font></font></i></a>

            <div class="NavigationDrawer NavigationDrawer-submenuItem">
              <nav class="NavigationDrawer-nav">
                <div class="NavigationDrawer-header">
                  <a href="https://go.dev/doc/effective_go#" tabindex="-1"><i class="material-icons"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ナビゲート前</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コミュニティ</font></font></a>
                </div>
                <ul class="NavigationDrawer-list">
                    <li class="NavigationDrawer-listItem">
                        <a href="https://go.dev/talks/" tabindex="-1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          録音された講演
                          
                        </font></font></a>
                      
                    </li>
                    <li class="NavigationDrawer-listItem">
                        <a href="https://www.meetup.com/pro/go" tabindex="-1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          ミートアップ
                           </font></font><i class="material-icons"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新規で開く</font></font></i>
                        </a>
                      
                    </li>
                    <li class="NavigationDrawer-listItem">
                        <a href="https://go.dev/wiki/Conferences" tabindex="-1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          会議
                           </font></font><i class="material-icons"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新規で開く</font></font></i>
                        </a>
                      
                    </li>
                    <li class="NavigationDrawer-listItem">
                        <a href="https://go.dev/blog" tabindex="-1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          ブログに行く
                          
                        </font></font></a>
                      
                    </li>
                    <li class="NavigationDrawer-listItem">
                        <a href="https://go.dev/help" tabindex="-1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          Goプロジェクト
                          
                        </font></font></a>
                      
                    </li>
                    <li class="NavigationDrawer-listItem">
                        <div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接続する</font></font></div>
                        <div class="Header-socialIcons">
                          
                            <a class="Header-socialIcon" href="https://groups.google.com/g/golang-nuts" tabindex="-1"><img src="./効果的なGo - Goプログラミング言語_files/google-groups.svg"></a>
                            <a class="Header-socialIcon" href="https://github.com/golang" tabindex="-1"><img src="./効果的なGo - Goプログラミング言語_files/github.svg"></a>
                            <a class="Header-socialIcon" href="https://twitter.com/golang" tabindex="-1"><img src="./効果的なGo - Goプログラミング言語_files/twitter.svg"></a>
                            <a class="Header-socialIcon" href="https://www.reddit.com/r/golang/" tabindex="-1"><img src="./効果的なGo - Goプログラミング言語_files/reddit.svg"></a>
                            <a class="Header-socialIcon" href="https://invite.slack.golangbridge.org/" tabindex="-1"><img src="./効果的なGo - Goプログラミング言語_files/slack.svg"></a>
                            <a class="Header-socialIcon" href="https://stackoverflow.com/tags/go" tabindex="-1"><img src="./効果的なGo - Goプログラミング言語_files/stack-overflow.svg"></a>
                        </div>
                    </li>
                </ul>
              </nav></div>
            
          </li>

        
    </ul>
  </nav>
</aside>
<div class="NavigationDrawer-scrim js-scrim" role="presentation"></div>
<main class="SiteContent SiteContent--default" id="main-content">
  


<article class="Doc Article">



  
<ol class="SiteBreadcrumb">
  
<li class="BreadcrumbNav-li ">
  <a class="BreadcrumbNav-link" href="https://go.dev/doc/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ドキュメント
  </font></font></a>
</li>
<li class="BreadcrumbNav-li active">
  <a class="BreadcrumbNav-link" href="https://go.dev/doc/effective_go"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  効果的な囲碁
  </font></font></a>
</li>
</ol>



<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">効果的な囲碁</font></font></h1>






<div id="nav" class="TOC"><table class="unruled"><tbody><tr><th colspan="2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目次</font></font></th></tr><tr><td class="first"><dl><dt><a href="https://go.dev/doc/effective_go#introduction"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">導入</font></font></a></dt><dd class="indent"><a href="https://go.dev/doc/effective_go#examples"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例</font></font></a></dd><dt><a href="https://go.dev/doc/effective_go#formatting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">書式設定</font></font></a></dt><dt><a href="https://go.dev/doc/effective_go#commentary"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解説</font></font></a></dt><dt><a href="https://go.dev/doc/effective_go#names"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名前</font></font></a></dt><dd class="indent"><a href="https://go.dev/doc/effective_go#package-names"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッケージ名</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#Getters"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ゲッター</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#interface-names"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェース名</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#mixed-caps"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ミックスキャップ</font></font></a></dd><dt><a href="https://go.dev/doc/effective_go#semicolons"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">セミコロン</font></font></a></dt><dt><a href="https://go.dev/doc/effective_go#control-structures"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">制御構造</font></font></a></dt><dd class="indent"><a href="https://go.dev/doc/effective_go#if"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">もし</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#redeclaration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再申告と再譲渡</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#for"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のために</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#switch"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スイッチ</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#type_switch"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイプスイッチ</font></font></a></dd><dt><a href="https://go.dev/doc/effective_go#functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機能</font></font></a></dt><dd class="indent"><a href="https://go.dev/doc/effective_go#multiple-returns"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">複数の戻り値</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#named-results"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名前付き結果パラメータ</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#defer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">延期</font></font></a></dd><dt><a href="https://go.dev/doc/effective_go#data"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データ</font></font></a></dt><dd class="indent"><a href="https://go.dev/doc/effective_go#allocation_new"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新規割り当て</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#composite_literals"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンストラクタと複合リテラル</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#allocation_make"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">makeによる割り当て</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#arrays"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配列</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#slices"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スライス</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#two_dimensional_slices"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2次元スライス</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#maps"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">地図</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#printing"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">印刷</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#append"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加</font></font></a></dd><dt><a href="https://go.dev/doc/effective_go#initialization"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初期化</font></font></a></dt></dl></td><td><dl><dd class="indent"><a href="https://go.dev/doc/effective_go#constants"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定数</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#variables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#init"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初期化関数</font></font></a></dd><dt><a href="https://go.dev/doc/effective_go#methods"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font></font></a></dt><dd class="indent"><a href="https://go.dev/doc/effective_go#pointers_vs_values"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポインタと値</font></font></a></dd><dt><a href="https://go.dev/doc/effective_go#interfaces_and_types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェースとその他のタイプ</font></font></a></dt><dd class="indent"><a href="https://go.dev/doc/effective_go#interfaces"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェース</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#conversions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンバージョン</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#interface_conversions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェース変換と型アサーション</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#generality"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一般性</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#interface_methods"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェースとメソッド</font></font></a></dd><dt><a href="https://go.dev/doc/effective_go#blank"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空白の識別子</font></font></a></dt><dd class="indent"><a href="https://go.dev/doc/effective_go#blank_assign"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多重代入における空白識別子</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#blank_unused"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未使用のインポートと変数</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#blank_import"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">副作用の輸入</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#blank_implements"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェースチェック</font></font></a></dd><dt><a href="https://go.dev/doc/effective_go#embedding"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">埋め込み</font></font></a></dt><dt><a href="https://go.dev/doc/effective_go#concurrency"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同時実行性</font></font></a></dt><dd class="indent"><a href="https://go.dev/doc/effective_go#sharing"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コミュニケーションで共有する</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#goroutines"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ゴルーチン</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#channels"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チャンネル</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#chan_of_chan"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チャンネルのチャンネル</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#parallel"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">並列化</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#leaky_buffer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">漏れやすいバッファ</font></font></a></dd><dt><a href="https://go.dev/doc/effective_go#errors"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エラー</font></font></a></dt><dd class="indent"><a href="https://go.dev/doc/effective_go#panic"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パニック</font></font></a></dd><dd class="indent"><a href="https://go.dev/doc/effective_go#recover"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回復する</font></font></a></dd><dt><a href="https://go.dev/doc/effective_go#web_server"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ウェブサーバー</font></font></a></dt></dl></td></tr></tbody></table></div>









<h2 id="introduction"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">導入</font></font><a href="https://go.dev/doc/effective_go#introduction" class="Article-idLink" aria-label="はじめに"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Goは新しい言語です。既存の言語からアイデアを借用しているものの、Go独自の特性により、効果的なGoプログラムは、他の言語で書かれたプログラムとは性質が異なります。C++やJavaのプログラムをそのままGoに翻訳しても、満足のいく結果は得られないでしょう。JavaプログラムはGoではなくJavaで書かれているからです。一方で、Goの観点から問題を考えれば、成功するものの全く異なるプログラムが生まれる可能性があります。つまり、Goをうまく書くには、Goの特性とイディオムを理解することが重要です。また、命名、フォーマット、プログラム構築など、Goのプログラミングにおける確立された規則を理解することも重要です。そうすることで、書いたプログラムが他のGoプログラマーにとって理解しやすいものになるでしょう。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このドキュメントは、明確で慣用的なGoコードを書くためのヒントを提供します。</font></font><a href="https://go.dev/ref/spec"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">言語仕様</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://go.dev/tour/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Goのツアー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://go.dev/doc/code.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Goコードの書き方を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">補足するものであり、これらはすべて最初に読む必要があります。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2022年1月追記：このドキュメントは2009年のGoリリースに合わせて書かれたもので、それ以降大幅な更新はされていません。言語自体の使い方を理解するための優れたガイドではありますが、言語の安定性のおかげで、ライブラリについてはほとんど触れられておらず、ビルドシステム、テスト、モジュール、ポリモーフィズムなど、Goエコシステムにおける重要な変更点については何も触れられていません。多くの変化があり、膨大な数のドキュメント、ブログ、書籍が現代のGoの使い方をうまく解説しているため、更新の予定はありません。Effective Goは引き続き有用ですが、読者はこれが完全なガイドとは程遠いことを理解する必要があります。詳細については、</font></font><a href="https://go.dev/issue/28782"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">問題番号28782を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参照してください。
</font></font></p>

<h3 id="examples"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例</font></font><a href="https://go.dev/doc/effective_go#examples" class="Article-idLink" aria-label="例を見る"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"></font><a href="https://go.dev/src/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go パッケージのソースコードは</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
、</font><font style="vertical-align: inherit;">
コアライブラリとしてだけでなく、言語の使い方のサンプルとしても活用できます。さらに、多くのパッケージには、
 </font></font><a href="https://go.dev/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">go.devウェブサイトから直接実行できる、自己完結型の実用的な実行ファイルが含まれています（このサンプルコードも</font></font></a><font style="vertical-align: inherit;"></font><a href="https://go.dev/pkg/strings/#example-Map"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その一つ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です
</font><font style="vertical-align: inherit;">。必要に応じて「Example」をクリックして開いてください）。問題へのアプローチ方法や実装方法について疑問がある場合は、ライブラリ内のドキュメント、コード、サンプルコードから回答、アイデア、背景情報を得ることができます。
</font></font></p>


<h2 id="formatting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フォーマット</font></font><a href="https://go.dev/doc/effective_go#formatting" class="Article-idLink" aria-label="書式設定へ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フォーマットの問題は最も議論を呼ぶものの、最も影響度が低いものです。人々は様々なフォーマットスタイルに適応できますが、そうする必要がない方が望ましいですし、全員が同じスタイルに従うことで、この問題に費やす時間も少なくなります。問題は、長々とした規範的なスタイルガイドなしに、このユートピアにどのようにアプローチするかということです。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Goでは、特殊なアプローチを採用し、ほとんどのフォーマット処理をマシンに任せています。</font></font><code>gofmt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プログラム（ソースファイルレベルではなくパッケージレベルで動作する としても利用可能</font></font><code>go fmt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）はGoプログラムを読み込み、標準的なインデントと垂直方向の配置でソースを出力します。コメントは保持され、必要に応じて再フォーマットされます。新しいレイアウト状況への対応方法を知りたい場合は を実行してください</font></font><code>gofmt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。回答が正しくない場合は、プログラムを再調整してください（または に関するバグを報告してください</font></font><code>gofmt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。回避策は使用しないでください。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例えば、構造体のフィールドにコメントを並べるのに時間を費やす必要はありません。
</font></font><code>Gofmt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が代わりにやってくれます。宣言が
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T型構造体{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    name string // オブジェクトの名前</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    value int // その値</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p>
<code>gofmt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列を整列させます:
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T型構造体{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    name string // オブジェクトの名前</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    value int // その値</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
標準パッケージ内のすべての Go コードは でフォーマットされています</font></font><code>gofmt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>


<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まだいくつかの書式設定の詳細が残っています。簡単に言うと、
</font></font></p>

<dl>
    <dt><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インデント</font></font></dt>
    <dd><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インデントにはタブを使用し、</font></font><code>gofmt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デフォルトでタブが出力されます。スペースは必要な場合にのみ使用してください。
    </font></font></dd>
    <dt><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行の長さ</font></font></dt>
    <dd><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    Go言語には行の長さ制限はありません。パンチカードに収まらない心配はありません。行が長すぎると感じた場合は、改行してタブを追加し、インデントしてください。
    </font></font></dd>
    <dt><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">括弧</font></font></dt>
    <dd><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    GoではCやJavaよりも括弧が少なく済みます。制御構造（</font></font><code>if</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
     </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）の構文には括弧が不要です。また、演算子の優先順位も短くて明確なので、
</font></font><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x&lt;&lt;8 + y&lt;&lt;16
</font></font></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    他の言語とは異なり、スペースが意味する通りの意味を持ちます。
    </font></font></dd>
</dl>

<h2 id="commentary"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解説</font></font><a href="https://go.dev/doc/effective_go#commentary" class="Article-idLink" aria-label="解説へ"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go は C スタイルの</font></font><code>/* */</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブロックコメントと C++ スタイルの</font></font><code>//</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行コメントを提供します。行コメントが標準です。ブロックコメントは主にパッケージコメントとして使用されますが、式の中で使用したり、コードの大部分を無効化したりするのに便利です。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
トップレベルの宣言の前に改行なしで記述されたコメントは、宣言自体を文書化するものとみなされます。これらの「ドキュメンテーションコメント」は、特定のGoパッケージまたはコマンドの主要なドキュメントです。ドキュメンテーションコメントの詳細については、「</font></font><a href="https://go.dev/doc/comment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go Doc Comments</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」を参照してください。
</font></font></p>

<h2 id="names"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名前</font></font><a href="https://go.dev/doc/effective_go#names" class="Article-idLink" aria-label="名前へ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go言語においても、名前は他の言語と同様に重要です。意味的な影響さえも持ちます。パッケージ外における名前の可視性は、最初の文字が大文字かどうかによって決まります。そのため、Go言語における命名規則について少し時間をかけて説明しておく価値があります。
</font></font></p>


<h3 id="package-names"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッケージ名</font></font><a href="https://go.dev/doc/effective_go#package-names" class="Article-idLink" aria-label="パッケージ名に移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パッケージをインポートすると、パッケージ名がコンテンツへのアクセス子になります。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「バイト」をインポートする
</font></font></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インポートするパッケージは について話すことができます</font></font><code>bytes.Buffer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。パッケージを使用するすべての人が同じ名前を使用してそのコンテンツを参照できると便利です。つまり、パッケージ名は短く、簡潔で、印象に残る適切な名前にする必要があります。慣例により、パッケージには小文字で 1 単語の名前が付けられます。アンダースコアや大文字と小文字が混在する必要はありません。パッケージを使用するすべての人がその名前を入力するので、簡潔である方がよいでしょう。また、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事前</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に衝突を心配する必要はありません。パッケージ名はインポートのデフォルト名にすぎません。すべてのソースコードを通じて一意である必要はなく、まれに衝突が発生した場合は、インポートするパッケージがローカルで使用するために別の名前を選択できます。いずれの場合も、インポートのファイル名によってどのパッケージが使用されているかが決まるだけなので、混乱はまれです。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もう 1 つの規則は、パッケージ名がそのソース ディレクトリのベース名になることです。 のパッケージは</font></font><code>src/encoding/base64</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
としてインポートされます</font></font><code>"encoding/base64"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が、名前は で</font></font><code>base64</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あり、</font></font><code>encoding_base64</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">や ではありません</font></font><code>encodingBase64</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パッケージのインポート側は、名前を使用してその内容を参照するため、パッケージ内のエクスポートされた名前では、その事実を使用して重複を避けることができます。(</font></font><code>import .</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表記は使用しないでください。この表記は、テスト対象のパッケージの外部で実行する必要があるテストを簡素化できますが、それ以外の場合は避けるべきです。) たとえば、パッケージ 内のバッファ付きリーダー型は</font><font style="vertical-align: inherit;">ではなく と</font></font><code>bufio</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">呼ばれます</font><font style="vertical-align: inherit;">。これは、ユーザーには として表示されるため</font><font style="vertical-align: inherit;">、明確で簡潔な名前です。さらに、インポートされたエンティティは常にパッケージ名でアドレス指定されるため、</font><font style="vertical-align: inherit;">
は と競合しません</font><font style="vertical-align: inherit;">。同様に、 の新しいインスタンスを作成する関数(Go での</font><em><font style="vertical-align: inherit;">コンストラクタ</font></em><font style="vertical-align: inherit;">の定義</font><font style="vertical-align: inherit;">) は通常 と呼ばれます</font><font style="vertical-align: inherit;">が、 はパッケージによってエクスポートされる唯一の型であるため
</font><font style="vertical-align: inherit;">、パッケージは と呼ばれるため</font><font style="vertical-align: inherit;">、単に と呼ばれ</font><font style="vertical-align: inherit;">、パッケージのクライアントには として表示されます</font><font style="vertical-align: inherit;">。パッケージ構造を使用すると、適切な名前を選択できます。
</font></font><code>Reader</code><font style="vertical-align: inherit;"></font><code>BufReader</code><font style="vertical-align: inherit;"></font><code>bufio.Reader</code><font style="vertical-align: inherit;"></font><code>bufio.Reader</code><font style="vertical-align: inherit;"></font><code>io.Reader</code><font style="vertical-align: inherit;"></font><code>ring.Ring</code><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><code>NewRing</code><font style="vertical-align: inherit;"></font><code>Ring</code><font style="vertical-align: inherit;"></font><code>ring</code><font style="vertical-align: inherit;"></font><code>New</code><font style="vertical-align: inherit;"></font><code>ring.New</code><font style="vertical-align: inherit;"></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もう一つの短い例は</font></font><code>once.Do</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、 ;
です。</font></font><code>once.Do(setup)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは読みやすく、 と書き直しても改善されません</font></font><code>once.DoOrWaitUntilDone(setup)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。長い名前が自動的に読みやすくなるわけではありません。役に立つドキュメンテーションコメントは、長すぎる名前よりも価値がある場合が多いのです。
</font></font></p>

<h3 id="Getters"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ゲッター</font></font><a href="https://go.dev/doc/effective_go#Getters" class="Article-idLink" aria-label="ゲッターズへ"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go は getter と setter を自動的にサポートしません。getter と setter を自分で提供することに何の問題もありませんし、多くの場合そうすることが適切ですが、getter の名前に を入れることは慣用的でも必要でもありません。 </font><font style="vertical-align: inherit;">(小文字、エクスポートされていない)</font></font><code>Get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">というフィールドがある場合
、getter メソッド</font><font style="vertical-align: inherit;">は ではなく (大文字、エクスポートされている) と呼ぶべき</font><font style="vertical-align: inherit;">です。エクスポートに大文字の名前を使用することで、フィールドとメソッドを区別するフックが提供されます。必要に応じて、setter 関数は と呼ばれる可能性があります</font><font style="vertical-align: inherit;">。実際には、どちらの名前も読みやすいです。
</font></font><code>owner</code><font style="vertical-align: inherit;"></font><code>Owner</code><font style="vertical-align: inherit;"></font><code>GetOwner</code><font style="vertical-align: inherit;"></font><code>SetOwner</code><font style="vertical-align: inherit;"></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有者:= obj.Owner()</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
所有者 != ユーザー {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    obj.SetOwner(ユーザー)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<h3 id="interface-names"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェース名</font></font><a href="https://go.dev/doc/effective_go#interface-names" class="Article-idLink" aria-label="インターフェース名に移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
慣例により、1 メソッド インターフェイスは、メソッド名に -er サフィックスまたは同様の変更を加えてエージェント名詞を構成し、</font></font><code>Reader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><code>Writer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">などとして
</font></font><code>Formatter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命名
されます。</font></font><code>CloseNotifier</code><font style="vertical-align: inherit;"></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このような名前は数多く存在し、それらとそれらが表す関数名を尊重することは生産的です。
 </font></font><code>Read</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、、、、</font><font style="vertical-align: inherit;">など
は標準的なシグネチャと意味を持ちます。混乱を避けるため、同じシグネチャと意味を持たない限り</font></font><code>Write</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、メソッドにこれらの名前を与えないでください</font></font><code>Close</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">逆に、既存の型のメソッドと同じ意味を持つメソッドを実装する場合は、同じ名前とシグネチャを与えてください。文字列変換メソッドは、</font><font style="vertical-align: inherit;">ではなく、と呼びましょう</font><font style="vertical-align: inherit;">。
</font></font><code>Flush</code><font style="vertical-align: inherit;"></font><code>String</code><font style="vertical-align: inherit;"></font><code>String</code><font style="vertical-align: inherit;"></font><code>ToString</code><font style="vertical-align: inherit;"></font></p>

<h3 id="mixed-caps"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">混合大文字</font></font><a href="https://go.dev/doc/effective_go#mixed-caps" class="Article-idLink" aria-label="混合大文字へ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"></font><code>MixedCaps</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、Go では、複数単語の名前を書くときにアンダースコアではなくor</font><font style="vertical-align: inherit;">
を使用するのが慣例です</font></font><code>mixedCaps</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>

<h2 id="semicolons"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">セミコロン</font></font><a href="https://go.dev/doc/effective_go#semicolons" class="Article-idLink" aria-label="セミコロンに移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C言語と同様に、Go言語の形式文法では文の終了にセミコロンを使用しますが、C言語とは異なり、これらのセミコロンはソースコードには現れません。代わりに、レキサーは単純な規則に従ってスキャン時に自動的にセミコロンを挿入するため、入力テキストにはほとんどセミコロンが含まれません。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ルールは次の通りです。改行前の最後のトークンが識別子（</font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">や などの単語を含む</font></font><code>float64</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、数値や文字列定数などの基本リテラル、または以下のトークンのいずれかで
ある場合、</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">break continue fallthrough return ++ -- ) }
</font></font></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
字句解析器は常にトークンの後にセミコロンを挿入します。これは「文を終了させる可能性のあるトークンの後に改行が来る場合は、セミコロンを挿入する」と要約できます。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
閉じ括弧の直前のセミコロンは省略することもできるので、次のような文は
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    go func() { for { dst &lt;- &lt;-src } }()
</font></font></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
セミコロンは必要ありません。慣用的なGo言語のプログラムでは、ループ節などの箇所でのみセミコロンを使用し
</font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、初期化子、条件、継続要素を区切ります。また、同じ行に複数の文がある場合、そのように記述すると、セミコロンが区切りとして必要になります。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
セミコロンの挿入規則の結果として、制御構造の開き括弧（</font></font><code>if</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>select</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）を次の行に置くことはできません。もし置くと、括弧の前にセミコロンが挿入され、望ましくない効果が生じる可能性があります。次のように記述してください。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">もし i &lt; f() {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    g()</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
こんな風ではない
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if i &lt; f() // 間違っています!</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{ // 間違っている！</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    g()</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>


<h2 id="control-structures"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">制御構造</font></font><a href="https://go.dev/doc/effective_go#control-structures" class="Article-idLink" aria-label="制御構造へ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>

<p><font style="vertical-align: inherit;"></font><code>do</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go の制御構造は C の制御構造と関連していますが、重要な点において異なります。orループ</font><font style="vertical-align: inherit;">
はなく</font></font><code>while</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、わずかに一般化された
</font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;
のみで、</font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">より柔軟です。
</font></font><code>if</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">また、</font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のようなオプションの初期化文も使用できます</font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font><code>break</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">また、</font></font><code>continue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文は、中断または継続する対象を識別するためのオプションのラベルを指定できます。さらに、型スイッチや多方向通信マルチプレクサなどの新しい制御構造も追加されています</font></font><code>select</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。構文も若干異なります。括弧は存在せず、本体は常に中括弧で区切る必要があります。
</font></font></p>

<h3 id="if"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">もし</font></font><a href="https://go.dev/doc/effective_go#if" class="Article-idLink" aria-label="場合へ進む"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go では、単純なものは</font></font><code>if</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次のようになります。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x &gt; 0 の場合 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    yを返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
必須の中括弧は、単純な文を複数行に記述することを推奨します。特に</font><font style="vertical-align: inherit;">本文に や</font></font><code>if</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">などの制御文が含まれている場合は、中括弧を使用するのが望ましいスタイルです
</font><font style="vertical-align: inherit;">。
</font></font><code>return</code><font style="vertical-align: inherit;"></font><code>break</code><font style="vertical-align: inherit;"></font></p>

<p><font style="vertical-align: inherit;"></font><code>if</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">およびは</font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初期化ステートメントを受け入れる
</font><font style="vertical-align: inherit;">
ため、ローカル変数を設定するために使用されるのがよく見られます。</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">err := file.Chmod(0664); err != nil {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    log.Print(エラー)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    エラーを返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p id="else"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go ライブラリでは、</font></font><code>if</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文が次の文に流れ込まないとき、つまり、本体が</font></font><code>break</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>continue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><code>goto</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、またはで終わるとき</font></font><code>return</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、不要な部分
</font></font><code>else</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が省略されます。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f, err := os.Open(名前)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
err != nil の場合</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    エラーを返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コード使用(f)</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、コードが一連のエラー状態から保護しなければならない一般的な状況の例です。ページを進むにつれて正常な制御フローが流れ、発生したエラーケースが排除されれば、コードは読みやすくなります。エラーケースは</font></font><code>return</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
文で終わることが多いため、結果として得られるコードには</font></font><code>else</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文は必要ありません。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f, err := os.Open(名前)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
err != nil の場合</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    エラーを返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d, エラー:= f.Stat()</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
err != nil の場合</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    f.Close()</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    エラーを返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コード使用(f, d)</font></font><font></font>
</pre>


<h3 id="redeclaration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再宣言と再代入</font></font><a href="https://go.dev/doc/effective_go#redeclaration" class="Article-idLink" aria-label="再申告へ進む"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
余談：前のセクションの最後の例は、
</font></font><code>:=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">短い宣言形式がどのように機能するかを詳細に示しています。呼び出し側の宣言</font></font><code>os.Open</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f, err := os.Open(名前)
</font></font></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この文は2つの変数</font></font><code>f</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とを宣言しています</font></font><code>err</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。数行後の の呼び出しは</font></font><code>f.Stat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d, エラー:= f.Stat()
</font></font></pre>

<p><font style="vertical-align: inherit;"></font><code>d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これはと を</font><font style="vertical-align: inherit;">
宣言しているように見えます</font></font><code>err</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。しかし、 が</font></font><code>err</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">両方の文に出現していることに注意してください。この重複は有効です。</font></font><code>err</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は最初の文で宣言されていますが、 2番目の文では</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再代入</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のみが行われています。つまり、 の呼び出しは、上で宣言された</font></font><code>f.Stat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">既存の
</font></font><code>err</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数を使用し、単に新しい値を代入するだけです。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
宣言では、変数</font><font style="vertical-align: inherit;">がすでに宣言されている場合でも、次の条件を満たす限り、
</font></font><code>:=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その変数を記述できます。</font></font><code>v</code><font style="vertical-align: inherit;"></font></p>

<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この宣言は既存の宣言と同じスコープ内にあります</font></font><code>v</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（</font></font><code>v</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すでに外側のスコープ内で宣言されている場合、この宣言は新しい変数を作成します§）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初期化における対応する値は に代入可能で</font></font><code>v</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あり、</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">宣言によって作成される他の変数が少なくとも 1 つあります。</font></font></li>
</ul>

<p><font style="vertical-align: inherit;"></font><code>err</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この珍しい特性は純粋な実用性に基づくもので、例えば長いチェーンの中で</font><font style="vertical-align: inherit;">
単一の値を使うのが容易になります</font></font><code>if-else</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。頻繁に使用されるのを目にすることになるでしょう。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
§ ここで注目すべき点は、Go では関数のパラメータと戻り値のスコープは、関数本体を囲む中括弧の外側に字句的に現れるにもかかわらず、関数本体と同じであるということです。
</font></font></p>

<h3 id="for"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のために</font></font><a href="https://go.dev/doc/effective_go#for" class="Article-idLink" aria-label="へ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go の</font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ループは C のループに似ていますが、同じではありません。Go では</font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
と が統合され、</font></font><code>while</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は存在しません</font></font><code>do-while</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。3 つの形式があり、そのうち 1 つだけがセミコロンを含みます。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Cのように</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
初期化の場合; 条件; ポスト { }</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// Cのwhileのように</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
条件 { }</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// C の for(;;) と同様</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
のために { }</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
宣言が短いため、ループ内でインデックス変数を簡単に宣言できます。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">合計 := 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
i := 0; i &lt; 10; i++ {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    合計 += i</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
配列、スライス、文字列、マップをループしたり、チャネルから読み取ったりする場合は、</font></font><code>range</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">句を使用してループを管理できます。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キー、値 := 範囲 oldMap {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    newMap[キー] = 値</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
範囲内の最初の項目（キーまたはインデックス）のみが必要な場合は、2 番目の項目を削除します。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キー:=範囲m{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    キーの有効期限が切れている場合（）{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        削除(m, キー)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
範囲内の 2 番目の項目 (値) のみが必要な場合は、</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空白の識別子</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(アンダースコア) を使用して最初の項目を破棄します。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">合計 := 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
for _, value := range array {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    合計 += 値</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
空白の識別子には、</font></font><a href="https://go.dev/doc/effective_go#blank"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">後のセクション</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で説明するように、さまざまな用途があります。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
文字列の場合、</font></font><code>range</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はUTF-8を解析して個々のUnicodeコードポイントを分離するなど、より多くの処理を行います。誤ったエンコードは1バイトを消費し、置換ルーンU+FFFDを生成します。（この名前（および関連する組み込み型）</font></font><code>rune</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、Go言語における単一のUnicodeコードポイントの用語です。詳細は</font></font><a href="https://go.dev/ref/spec#Rune_literals"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">言語仕様を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参照してください
。）ループ
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for pos, char := range "日本\x80語" { // \x80 は不正な UTF-8 エンコーディングです</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Printf("文字%#Uはバイト位置%dから始まります\n", char, pos)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
版画
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字 U+65E5 '日' はバイト位置 0 から始まります。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
文字U+672C「本」はバイト位置3から始まります</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
文字 U+FFFD '�' はバイト位置 6 から始まります</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
文字U+8A9E「語」はバイト位置7から始まります</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、Go にはカンマ演算子がなく、</font></font><code>++</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と は</font></font><code>--</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
式ではなく文です。したがって、 内で複数の変数を実行したい場合は、</font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
並列代入を使用する必要があります（ただし、</font></font><code>++</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と は使用できません</font></font><code>--</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// 反転</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
i, j := 0, len(a)-1; i &lt; j; i, j = i+1, j-1 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    a[i], a[j] = a[j], a[i]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<h3 id="switch"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スイッチ</font></font><a href="https://go.dev/doc/effective_go#switch" class="Article-idLink" aria-label="スイッチへ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go の式は</font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C の式よりも汎用的です。式は定数や整数である必要はなく、条件式は一致するものが見つかるまで上から下まで評価され、式が</font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">見つからない場合は がオンになります
。したがって、 </font><font style="vertical-align: inherit;">-- </font><font style="vertical-align: inherit;">- </font><font style="vertical-align: inherit;">-</font><font style="vertical-align: inherit;">
連鎖を として</font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記述することが可能であり、慣用的な方法です
</font><font style="vertical-align: inherit;">。
</font></font><code>if</code><font style="vertical-align: inherit;"></font><code>else</code><font style="vertical-align: inherit;"></font><code>if</code><font style="vertical-align: inherit;"></font><code>else</code><font style="vertical-align: inherit;"></font><code>switch</code><font style="vertical-align: inherit;"></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func unhex(c byte) byte {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    スイッチ {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    '0' &lt;= c &amp;&amp; c &lt;= '9'の場合:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        c - '0'を返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    'a' &lt;= c &amp;&amp; c &lt;= 'f' の場合:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        c - 'a' + 10 を返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    'A' &lt;= c &amp;&amp; c &lt;= 'F'の場合:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        c - 'A' + 10 を返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    0を返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
自動的にフォールスルーされることはありませんが、ケースはコンマ区切りのリストで提示できます。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func shouldEscape(c byte) bool {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    スイッチc {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ケース ' '、'?'、'&amp;'、'='、'#'、'+'、'%':</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        真を返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    falseを返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go言語では他のC言語系言語ほど一般的ではありませんが、</font></font><code>break</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文を使って</font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">早期終了させることができます。しかし、switch文ではなく、ループを抜け出す必要がある場合もあります。Go言語では、ループにラベルを付け、そのラベルまで「break」することで、これを実現できます。この例では、両方の使用例を示しています。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ループ：</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    n := 0; n &lt; len(src); n += size {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        スイッチ {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        src[n] &lt; sizeOneの場合:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            検証のみの場合{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                壊す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            サイズ = 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            更新(src[n])</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        src[n] &lt; sizeTwoの場合:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            n+1 &gt;= len(src) の場合 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                err = errShortInput</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                ループを破る</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            検証のみの場合{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                壊す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            サイズ = 2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            更新(src[n] + src[n+1]&lt;&lt;shift)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、この</font></font><code>continue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステートメントはオプションのラベルも受け入れますが、ループにのみ適用されます。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このセクションの最後に、2 つのステートメントを使用するバイト スライスの比較ルーチンを次に示します
</font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Compareは2つのバイトスライスを比較した整数を返します。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// 辞書順に。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// 結果は、a == b の場合は 0、a &lt; b の場合は -1、a &gt; b の場合は +1 になります。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func Compare(a, b []byte) int {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    i := 0; i &lt; len(a) &amp;&amp; i &lt; len(b); i++ {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        スイッチ {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        a[i] &gt; b[i]の場合:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            戻り値 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        a[i] &lt; b[i]の場合:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            -1を返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    スイッチ {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    len(a) &gt; len(b)の場合:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        戻り値 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    len(a) &lt; len(b) の場合:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        -1を返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    0を返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<h3 id="type_switch"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型スイッチ</font></font><a href="https://go.dev/doc/effective_go#type_switch" class="Article-idLink" aria-label="type_switchへ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スイッチは、インターフェース変数の動的な型を調べるためにも使用できます。このような</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型スイッチは、</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">括弧内にキーワードを記述した型アサーションの構文を使用します</font></font><code>type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。スイッチが式の中で変数を宣言する場合、各節でその変数の型が対応付けられます。このような場合、名前を再利用することも慣用的です。つまり、同じ名前でそれぞれ異なる型の新しい変数を宣言することになります。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">var t インターフェース{}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
t = 何らかの型の関数()</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スイッチ t := t.(type) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デフォルト：</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Printf("unexpected type %T\n", t) // %Tはtの型を出力します</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ブール値の場合:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Printf("boolean %t\n", t) // tはbool型です</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ケース int:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Printf("integer %d\n", t) // tはint型です</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ケース *ブール:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Printf("boolean %tへのポインタ\n", *t) // tの型は*boolです</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ケース *int:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Printf("整数へのポインタ %d\n", *t) // t の型は *int です</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<h2 id="functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数</font></font><a href="https://go.dev/doc/effective_go#functions" class="Article-idLink" aria-label="関数へ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>

<h3 id="multiple-returns"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">複数の戻り値</font></font><a href="https://go.dev/doc/effective_go#multiple-returns" class="Article-idLink" aria-label="複数回返品へ進む"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"></font><code>-1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go の珍しい機能の一つは、関数とメソッドが複数の値を返すことができることです。この形式は、C プログラムの扱いにくい慣用句、例えばfor の</font><font style="vertical-align: inherit;">
ようなインバンドエラーの戻り値や</font></font><code>EOF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
、アドレスで渡された引数の変更などを改善するために使用できます。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C言語では、書き込みエラーは負のカウントで通知され、エラーコードは揮発性領域に保存されます。Go言語では、</font></font><code>Write</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カウント</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font></i><font style="vertical-align: inherit;"></font><code>Write</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エラーを返すことができます。「はい、いくつかのバイトは書き込みましたが、デバイスがいっぱいになったため、すべては書き込まれていません。」パッケージのファイルに対するメソッド</font><font style="vertical-align: inherit;">のシグネチャは</font></font><code>os</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次のとおりです。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func (file *File) Write(b []byte) (n int, err error)
</font></font></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ドキュメントに記載されている通り、書き込まれたバイト数と、</font></font><code>error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の場合は非nil値を返します</font></font><code>n</code>
<code>!=</code> <code>len(b)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これは一般的なスタイルです。詳細な例については、エラー処理のセクションを参照してください。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同様のアプローチにより、参照パラメータをシミュレートするために戻り値へのポインタを渡す必要がなくなります。バイトスライス内の特定の位置から数値を取得し、その数値と次の位置を返すシンプルな関数を以下に示します。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func nextInt(b []byte, i int) (int, int) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    のために; i &lt; len(b) &amp;&amp; !isDigit(b[i]); i++ {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    x := 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    のために; i &lt; len(b) &amp;&amp; isDigit(b[i]); i++ {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        x = x*10 + int(b[i]) - '0'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    x, iを返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを使用して、次のように入力スライス内の数字をスキャンできます</font></font><code>b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    i := 0; i &lt; len(b); {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        x, i = nextInt(b, i)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        fmt.Println(x)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font>
</pre>

<h3 id="named-results"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名前付き結果パラメータ</font></font><a href="https://go.dev/doc/effective_go#named-results" class="Article-idLink" aria-label="名前付き結果へ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go関数の戻り値または結果の「パラメータ」には名前を付けることができ、入力パラメータと同様に通常の変数として使用できます。名前を付けた場合、関数の実行開始時にそれぞれの型に対応するゼロ値に初期化されます。関数が</font></font><code>return</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引数なしで文を実行する場合、結果パラメータの現在の値が戻り値として使用されます。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
名前は必須ではありませんが、コードを短く明確にすることができます。つまり、名前はドキュメントとなるのです。結果に名前を付けると、</font></font><code>nextInt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">どのメソッドが返されるのかが明確になります</font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func nextInt(b []byte, pos int) (値, nextPos int) {
</font></font></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
名前付きの結果は初期化され、装飾のない戻り値に結び付けられているため、簡潔かつ明確になります。以下は、</font></font><code>io.ReadFull</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これをうまく活用した のバージョンです。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func ReadFull(r Reader, buf []byte) (n int, err error) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    len(buf) &gt; 0 &amp;&amp; err == nil {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        変数 nr int</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        nr, err = r.Read(buf)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        n += nr</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        buf = buf[nr:]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    戻る</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<h3 id="defer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">延期</font></font><a href="https://go.dev/doc/effective_go#defer" class="Article-idLink" aria-label="延期する"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Goの</font></font><code>defer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステートメントは、関数呼び出し（
 </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deferred</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数）を、関数が</font></font><code>defer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">戻る直前に実行するようにスケジュールします。これは、関数がどのパスを通って戻るかに関係なく解放しなければならないリソースなどの状況に対処するための、珍しいながらも効果的な方法です。典型的な例としては、ミューテックスのロック解除やファイルのクローズなどが挙げられます。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Contents はファイルの内容を文字列として返します。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func Contents(ファイル名文字列) (文字列, エラー) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    f, err := os.Open(ファイル名)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    err != nil の場合</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        "" を返す、エラー</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    defer f.Close() // 終了すると f.Close が実行されます。</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    var result []byte</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    buf := make([]byte, 100)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    のために {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        n, err := f.Read(buf[0:])</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        result = append(result, buf[0:n]...) // appendについては後ほど説明します。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        err != nil の場合</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            err == io.EOFの場合{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                壊す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            return "", err // ここで戻ると f は閉じられます。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    return string(result), nil // ここで戻ると f は閉じられます。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数呼び出しを遅延させることには</font></font><code>Close</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2つの利点があります。まず、ファイルを閉じるのを忘れることがなくなります。これは、関数を後から編集して新しい戻りパスを追加した場合に起こりやすいミスです。次に、ファイルを閉じる処理がファイルを開く処理の近くに配置されるため、関数の最後に置くよりもはるかに明確になります。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
遅延関数の引数（関数がメソッドの場合はレシーバーも含む）は、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">呼び出しの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実行時ではなく、遅延関数の実行時</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">評価されます。これにより、関数の実行中に変数の値が変更される心配がなくなるだけでなく、単一の遅延呼び出し箇所で複数の関数の実行を遅延できます。以下に簡単な例を示します。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i := 0; i &lt; 5; i++ {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Printf("%d ", i) を遅延する</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
遅延関数はLIFO順に実行されるため、このコードは
</font></font><code>4 3 2 1 0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数が戻ったときに を表示します。より現実的な例として、プログラム内で関数の実行をトレースする簡単な方法があります。次のような簡単なトレースルーチンをいくつか記述できます。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func trace(s string) { fmt.Println("entering:", s) }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func untrace(s string) { fmt.Println("leaving:", s) }</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// 以下のように使用します:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数a() {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    トレース("a")</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    defer untrace("a")</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    // 何かをする....</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
遅延関数の引数は実行時に評価されるという事実を活用すれば、より効果的な実装が可能になります</font></font><code>defer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。トレースルーチンは、トレース解除ルーチンへの引数を設定できます。次の例をご覧ください。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func trace(s string) 文字列 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Println("入力中:", s)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    リターンs</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func un(s 文字列) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Println("出発:", s)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数a() {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    defer un(trace("a"))</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Println("in a")</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数b() {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    遅延 un(trace("b"))</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Println("in b")</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ア()</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数main() {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    b()</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
版画
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入力: b</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
bで</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
入場：</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
で</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
出発：</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
出発：b</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他の言語のブロックレベルのリソース管理に慣れたプログラマーにとっては</font></font><code>defer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">奇妙に思えるかもしれませんが、その最も興味深く強力な応用は、まさにブロックベースではなく関数ベースであるという事実から生まれます。「」のセクションでは
</font></font><code>panic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>recover</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その可能性の別の例を見ていきます。
</font></font></p>

<h2 id="data"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データ</font></font><a href="https://go.dev/doc/effective_go#data" class="Article-idLink" aria-label="データへ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>

<h3 id="allocation_new"><font style="vertical-align: inherit;"><a href="https://go.dev/doc/effective_go#allocation_new" class="Article-idLink" aria-label="割り当て新規に移動"><font style="vertical-align: inherit;">¶</font></a><font style="vertical-align: inherit;">による割り当て</font></font><code>new</code><a href="https://go.dev/doc/effective_go#allocation_new" class="Article-idLink" aria-label="割り当て新規に移動"><font style="vertical-align: inherit;"></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go には、組み込み関数の
</font></font><code>new</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と という2 つのメモリ割り当てプリミティブがあります</font></font><code>make</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これらは異なる動作をし、異なる型に適用されるため、混乱するかもしれませんが、ルールは単純です。</font></font><code>new</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">まず について説明しましょう。 はメモリを割り当てる組み込み関数ですが、他の言語の同名の関数とは異なり</font><font style="vertical-align: inherit;">、メモリ</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を初期化せず、</font></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ゼロクリアする</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">だけです。つまり、 は
</font></font><code>new(T)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型の新しい項目のためにゼロクリアされたストレージを割り当て
</font></font><code>T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、そのアドレス、つまり 型の値を返します</font></font><code>*T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。Go の用語では、 は 型の新しく割り当てられたゼロ値へのポインタを返します
</font></font><code>T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
が返すメモリは</font></font><code>new</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ゼロで初期化されるため、データ構造を設計する際には、各型のゼロ値をそれ以上初期化せずに使用できるようにしておくと便利です。つまり、データ構造のユーザーは を使ってゼロ値を作成し、すぐに作業を開始できるということです。例えば、 の</font><font style="vertical-align: inherit;">ドキュメントには「 のゼロ値は、</font><font style="vertical-align: inherit;">すぐに使用できる空のバッファです」と記載されています。同様に、</font></font><code>new</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">は明示的なコンストラクタや</font><font style="vertical-align: inherit;">メソッドはありません。代わりに、 のゼロ値は、</font><font style="vertical-align: inherit;">
ロックされていないミューテックスとして定義されています。
</font></font><code>bytes.Buffer</code><font style="vertical-align: inherit;"></font><code>Buffer</code><font style="vertical-align: inherit;"></font><code>sync.Mutex</code><font style="vertical-align: inherit;"></font><code>Init</code><font style="vertical-align: inherit;"></font><code>sync.Mutex</code><font style="vertical-align: inherit;"></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ゼロ値が有用であるという性質は推移的に作用します。この型宣言を考えてみましょう。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SyncedBuffer構造体型{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ロック同期。ミューテックス</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    バッファバイト。バッファ</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
型の値は</font></font><code>SyncedBuffer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、割り当て後または宣言後すぐに使用できます。次のスニペットでは、</font></font><code>p</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と はどちらも</font></font><code>v</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加の設定なしで正しく動作します。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p := new(SyncedBuffer) // 型 *SyncedBuffer</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
var v SyncedBuffer // SyncedBuffer 型</font></font><font></font>
</pre>

<h3 id="composite_literals"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンストラクタと複合リテラル</font></font><a href="https://go.dev/doc/effective_go#composite_literals" class="Article-idLink" aria-label="複合リテラルに移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
場合によっては、ゼロ値では不十分で、パッケージから派生したこの例のように、初期化コンストラクターが必要になります</font></font><code>os</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func NewFile(fd int, name string) *File {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fd &lt; 0 の場合 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        nilを返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    f := new(ファイル)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    f.fd = fd</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    f.name = 名前</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    f.dirinfo = なし</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    f.nepipe = 0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    戻り値 f</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そこにはたくさんの定型句があります。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">複合リテラルを使うことで簡略化できます。複合リテラル</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とは、評価されるたびに新しいインスタンスを作成する式です。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func NewFile(fd int, name string) *File {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fd &lt; 0 の場合 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        nilを返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    f := ファイル{fd, 名前, nil, 0}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    リターン&amp;f</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C言語とは異なり、ローカル変数のアドレスを返しても全く問題ないことに注意してください。関数から戻った後も、変数に関連付けられた記憶領域は保持されます。実際、複合リテラルのアドレスを取得すると、評価されるたびに新しいインスタンスが割り当てられるため、最後の2行を結合することができます。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    &amp;File{fd, name, nil, 0} を返す
</font></font></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
複合リテラルのフィールドは順序どおりに配置され、すべて存在する必要があります。しかし、要素を</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フィールド</font></font></i><code>:</code><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値の</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ペアとして明示的にラベル付けすることで、初期化子は任意の順序で出現でき、欠落しているフィールドはそれぞれゼロ値として残ります。したがって、次のように記述できます。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    &amp;File{fd: fd, name: name} を返します
</font></font></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
限定的なケースとして、複合リテラルにフィールドが全く含まれていない場合、その型にはゼロ値が生成されます。式</font></font><code>new(File)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と は</font></font><code>&amp;File{}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同等です。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
複合リテラルは、配列、スライス、マップにも作成できます。フィールドラベルは、必要に応じてインデックスまたはマップキーになります。これらの例では、</font></font><code>Enone</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><code>Eio</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、の値</font></font><code>Einval</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が異なっている限り、初期化は正常に機能します。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a := [...]string {Enone: "エラーなし"、Eio: "Eio"、Einval: "無効な引数"}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
s := []string {Enone: "エラーなし"、Eio: "Eio"、Einval: "無効な引数"}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
m := map[int]string{Enone: "エラーなし", Eio: "Eio", Einval: "無効な引数"}</font></font><font></font>
</pre>

<h3 id="allocation_make"><font style="vertical-align: inherit;"><a href="https://go.dev/doc/effective_go#allocation_make" class="Article-idLink" aria-label="割り当て作成へ進む"><font style="vertical-align: inherit;">¶</font></a><font style="vertical-align: inherit;">による割り当て</font></font><code>make</code><a href="https://go.dev/doc/effective_go#allocation_make" class="Article-idLink" aria-label="割り当て作成へ進む"><font style="vertical-align: inherit;"></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
割り当てに戻りましょう。組み込み関数</font></font><code>make(T, </code><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">args は</font></font></i><code>)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とは異なる目的を持ちます</font></font><code>new(T)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。スライス、マップ、チャネルのみを作成し、</font><font style="vertical-align: inherit;">型</font><font style="vertical-align: inherit;">（ではない）の</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初期化された</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ゼロで</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はない）値を返します。この区別の理由は、これら3つの型が、内部的には、使用前に初期化する必要があるデータ構造への参照を表しているためです。例えば、スライスは、配列内のデータへのポインタ、長さ、容量を含む3つの項目を持つ記述子であり、これらの項目が初期化されるまではスライスは です</font><font style="vertical-align: inherit;">。スライス、マップ、チャネルの場合、 は
</font><font style="vertical-align: inherit;">内部データ構造を初期化し、値を使用できるように準備します。例えば、
</font></font><code>T</code><font style="vertical-align: inherit;"></font><code>*T</code><font style="vertical-align: inherit;"></font><code>nil</code><font style="vertical-align: inherit;"></font><code>make</code><font style="vertical-align: inherit;"></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メイク([]int, 10, 100)
</font></font></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
100 個の int 配列を割り当て、長さ 10、容量 100 のスライス構造体を作成します。このスライス構造体は、配列の最初の 10 個の要素を指します。(スライスを作成する場合、容量は省略できます。詳細については、スライスのセクションを参照してください。) 一方、は、</font></font><code>new([]int)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しく割り当てられたゼロ化されたスライス構造体へのポインタ、つまり</font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スライス値へのポインタを返します。
</font></font></p>

<p><font style="vertical-align: inherit;"></font><code>new</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これらの例は、と
</font><font style="vertical-align: inherit;">
の違いを示しています</font></font><code>make</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">var p *[]int = new([]int) // スライス構造を割り当てます。*p == nil; あまり役に立ちません</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
var v []int = make([]int, 100) // スライス v は 100 個の int の新しい配列を参照するようになりました</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// 不必要に複雑:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
var p *[]int = new([]int)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*p = make([]int, 100, 100)</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// 慣用句:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
v := make([]int, 100)</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは</font></font><code>make</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マップ、スライス、チャンネルにのみ適用され、ポインタを返さないことに注意してください。明示的なポインタを取得するには、</font></font><code>new</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数のアドレスを明示的に割り当てるか、取得してください。
</font></font></p>

<h3 id="arrays"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配列</font></font><a href="https://go.dev/doc/effective_go#arrays" class="Article-idLink" aria-label="配列へ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
配列はメモリの詳細なレイアウトを計画する際に役立ち、場合によってはメモリ割り当てを回避するのにも役立ちますが、主にスライスの構成要素として機能します。スライスについては次のセクションで説明します。このトピックの基礎知識として、配列について少し説明します。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GoとCでは配列の動作に大きな違いがあります。Goでは、
</font></font></p>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
配列は値です。ある配列を別の配列に代入すると、すべての要素がコピーされます。
</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特に、関数に配列を渡すと、関数は</font><font style="vertical-align: inherit;">配列へのポインタではなく、配列の
</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コピーを受け取ります。</font></font></i><font style="vertical-align: inherit;"></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
配列のサイズはその型の一部です。型</font></font><code>[10]int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
と は</font></font><code>[20]int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">異なります。
</font></font></li>
</ul>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
value プロパティは便利ですが、コストもかかります。C のような動作と効率が必要な場合は、配列へのポインターを渡すことができます。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func Sum(a *[3]float64) (合計 float64) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    _ の場合、v := 範囲 *a {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        合計 += v</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    戻る</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
配列 := [...]float64{7.0, 8.5, 9.1}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
x := Sum(&amp;array) // 明示的なアドレス演算子に注意</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、このスタイルもGoの慣用的なスタイルではありません。代わりにスライスを使用してください。
</font></font></p>

<h3 id="slices"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スライス</font></font><a href="https://go.dev/doc/effective_go#slices" class="Article-idLink" aria-label="スライスへ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スライスは配列をラップすることで、データのシーケンスに対するより汎用的で強力かつ便利なインターフェースを提供します。変換行列など、明示的に次元を持つ項目を除き、Goにおける配列プログラミングのほとんどは、単純な配列ではなくスライスを用いて行われます。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スライスは基となる配列への参照を保持し、あるスライスを別のスライスに代入すると、両方とも同じ配列を参照します。関数がスライス引数を取る場合、スライスの要素に加えられた変更は呼び出し元から参照可能になります。これは、基となる配列へのポインタを渡す場合と同様です。</font></font><code>Read</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、関数はポインタとカウントではなく、スライス引数を受け取ることができます。スライス内の長さは、読み取るデータ量の上限を設定します。以下は、
</font><font style="vertical-align: inherit;">パッケージ の型
</font></font><code>Read</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のメソッドのシグネチャです</font><font style="vertical-align: inherit;">。
</font></font><code>File</code><font style="vertical-align: inherit;"></font><code>os</code><font style="vertical-align: inherit;"></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func (f *File) Read(buf []byte) (n int, err error)
</font></font></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このメソッドは、読み取ったバイト数と、エラー値（存在する場合）を返します。より大きなバッファの最初の32バイトを読み込むには
</font></font><code>buf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、バッファ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をスライス</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（ここでは動詞として使用）します。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    n, err := f.Read(buf[0:32])
</font></font></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このようなスライスは一般的で効率的です。実際、効率性はさておき、次のスニペットでもバッファの最初の32バイトを読み取ります。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    変数n整数</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    var err エラー</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    i := 0; i &lt; 32; i++ {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        nbytes, e := f.Read(buf[i:i+1]) // 1バイトを読み取ります。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        n += nバイト</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        nbytes == 0 || e != nil {の場合</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            エラー = e</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            壊す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スライスの長さは、基になる配列の制限内に収まる限り変更できます。スライスを自身のスライスに代入するだけです。スライスの</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">容量は</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">組み込み関数 でアクセスでき、</font></font><code>cap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スライスが取り得る最大長を報告します。以下はスライスにデータを追加する関数です。データが容量を超えた場合、スライスは再割り当てされます。結果のスライスが返されます。この関数は、
</font></font><code>len</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と がスライス</font></font><code>cap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に適用された場合に有効である
という事実を利用し</font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、0を返します。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func Append(スライス, データ []byte) []byte {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    l := len(スライス)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    if l + len(data) &gt; cap(slice) { // 再割り当て</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        // 将来の成長に備えて、必要な量の 2 倍を割り当てます。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        newSlice := make([]byte, (l+len(data))*2)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        // コピー関数は事前に宣言されており、どのスライス タイプでも機能します。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        コピー(newSlice, スライス)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        スライス = newSlice</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    スライス = スライス[0:l+len(データ)]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    コピー(スライス[l:], データ)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    戻りスライス</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"></font><code>Append</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
の要素は変更できますが</font></font><code>slice</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、スライス自体 (ポインタ、長さ、容量を保持する実行時データ構造) は値によって渡される
</font><font style="vertical-align: inherit;">
ため、後でスライスを返す必要があります。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スライスに追加するというアイデアは非常に便利なので、
</font></font><code>append</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">組み込み関数で実現されています。ただし、この関数の設計を理解するにはもう少し情報が必要なので、後ほど詳しく説明します。
</font></font></p>

<h3 id="two_dimensional_slices"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2次元スライス</font></font><a href="https://go.dev/doc/effective_go#two_dimensional_slices" class="Article-idLink" aria-label="2次元スライスへ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go の配列とスライスは 1 次元です。2 次元の配列やスライスに相当するものを作成するには、次のように配列の配列またはスライスのスライスを定義する必要があります。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type Transform [3][3]float64 // 3x3配列、実際には配列の配列。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
type LinesOfText [][]byte // バイトスライスのスライス。</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スライスは可変長であるため、内側のスライスごとに異なる長さにすることも可能です。これはよくある状況で、例えばこの</font></font><code>LinesOfText</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例では各行が独立した長さを持ちます。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テキスト:=テキスト行数{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    []byte("今がその時だ"),</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    []byte("すべての善良なホリネズミのために"),</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    []byte("パーティーに楽しさをもたらす。")</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2Dスライスの割り当てが必要になる場合があります。例えば、ピクセルのスキャンラインを処理する場合などです。これを実現するには2つの方法があります。1つは各スライスを個別に割り当てる方法、もう1つは単一の配列を割り当て、個々のスライスをその配列にポインターとして渡す方法です。どちらを使用するかはアプリケーションによって異なります。スライスが拡大または縮小する可能性がある場合は、次の行を上書きしないように個別に割り当てるべきです。そうでない場合は、単一の割り当てでオブジェクトを構築する方が効率的です。参考までに、2つの方法の概要を以下に示します。まず、1行ずつ割り当てます。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// 最上位のスライスを割り当てます。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
picture := make([][]uint8, YSize) // yの単位ごとに1行。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// 行をループし、各行にスライスを割り当てます。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
i := 範囲画像 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    画像[i] = make([]uint8, XSize)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、1 つの割り当てとして、次のように行に分割されます。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// 前と同じように、最上位のスライスを割り当てます。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
picture := make([][]uint8, YSize) // yの単位ごとに1行。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// すべてのピクセルを保持するために 1 つの大きなスライスを割り当てます。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
pixels := make([]uint8, XSize*YSize) // 画像は [][]uint8 ですが、型は []uint8 です。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// 行をループし、残りのピクセル スライスの先頭から各行をスライスします。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
i := 範囲画像 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    画像[i], ピクセル = ピクセル[:Xサイズ], ピクセル[Xサイズ:]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<h3 id="maps"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マップ</font></font><a href="https://go.dev/doc/effective_go#maps" class="Article-idLink" aria-label="地図へ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マップは、ある型の値（キー</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）を別の型の値（</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要素</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）に
関連付ける、便利で強力な組み込みデータ構造です</font><font style="vertical-align: inherit;">。キーには、整数、浮動小数点数、複素数、文字列、ポインタ、インターフェース（動的型が等価性をサポートしている限り）、構造体、配列など、等価演算子が定義されている任意の型を指定できます。スライスは等価性が定義されていないため、マップのキーとして使用できません。スライスと同様に、マップは基になるデータ構造への参照を保持します。マップの内容を変更する関数にマップを渡すと、その変更は呼び出し元に表示されます。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マップは、コロンで区切られたキーと値のペアを使用した通常の複合リテラル構文を使用して構築できるため、初期化中に簡単に構築できます。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">var timeZone = map[文字列]int{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    「UTC」: 0*60*60,</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    「EST」: -5*60*60,</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    「CST」: -6*60*60,</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    「MST」: -7*60*60,</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    「太平洋標準時」: -8*60*60,</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マップ値の割り当てと取得は、インデックスが整数である必要がないことを除いて、配列とスライスの場合と構文的に同じように見えます。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オフセット := タイムゾーン["EST"]
</font></font></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マップに存在しないキーでマップ値を取得しようとすると、マップ内のエントリの型に対応するゼロ値が返されます。例えば、マップに整数が含まれている場合、存在しないキーを検索すると が返されます</font></font><code>0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。セットは、値型 を持つマップとして実装できます</font></font><code>bool</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。マップエントリを に設定して</font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値をセットに格納し、単純なインデックスでテストします。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出席者:= map[文字列]bool{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    「アン」：本当、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    「ジョー」：本当、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
if attendance[person] { // 人物がマップ内にいない場合はfalseになる</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Println(人, "会議に出席していた")</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
欠落したエントリとゼロ値を区別する必要がある場合があります。エントリが存在するのか</font></font><code>"UTC"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
、それともマップに全く存在しないためゼロなのかを判断します。多重代入の形式を用いることで区別できます。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数 秒 整数</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
var ok bool</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
秒、ok = timeZone[tz]</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
明らかな理由から、これは「カンマOK」イディオムと呼ばれています。この例では、</font></font><code>tz</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が存在する場合、</font></font><code>seconds</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
は適切に設定されて</font></font><code>ok</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trueになります。存在しない場合、
</font></font><code>seconds</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は0に設定されて</font></font><code>ok</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">falseになります。これを適切なエラーレポートとともに出力する関数を以下に示します。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func offset(tz string) int {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    秒の場合、ok := timeZone[tz]; ok {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        秒を返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    log.Println("不明なタイムゾーン:", tz)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    0を返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際の値を気にせずにマップ内に存在するかどうかをテストするには、</font><font style="vertical-align: inherit;">値の通常の変数の代わりに
</font></font><a href="https://go.dev/doc/effective_go#blank"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空白の識別子</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( ) を使用できます。</font></font><code>_</code><font style="vertical-align: inherit;"></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_, 現在 := タイムゾーン[tz]
</font></font></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マップエントリを削除するには、</font></font><code>delete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
組み込み関数を使用します。この関数の引数には、マップと削除するキーを指定します。キーがマップに既に存在しない場合でも、この関数は安全に実行できます。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">delete(timeZone, "PDT") // 標準時間になりました
</font></font></pre>

<h3 id="printing"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">印刷</font></font><a href="https://go.dev/doc/effective_go#printing" class="Article-idLink" aria-label="印刷へ進む"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go言語のフォーマット出力はC言語ファミリーに似たスタイルを採用しています</font></font><code>printf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
が、より豊富で汎用的です。関数は</font></font><code>fmt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パッケージ内に存在し、大文字で始まる名前を持ちます（</font></font><code>fmt.Printf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>fmt.Fprintf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
</font></font><code>fmt.Sprintf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">など）。文字列関数（</font></font><code>Sprintf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">など）は、指定されたバッファに値を入力するのではなく、文字列を返します。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
書式文字列を指定する必要はありません。</font></font><code>Printf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、 、
のそれぞれに対して</font></font><code>Fprintf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>Sprintf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">別の関数のペア、例えば</font></font><code>Print</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と があります</font></font><code>Println</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これらの関数は書式文字列を取らず、代わりに各引数のデフォルト書式を生成します。 の</font></font><code>Println</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バージョンでは引数の間に空白を挿入し、出力に改行を追加しますが、 の</font></font><code>Print</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バージョンでは、どちらのオペランドも文字列でない場合にのみ空白を追加します。この例では、各行は同じ出力を生成します。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fmt.Printf("こんにちは %d\n", 23)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fmt.Fprint(os.Stdout, "こんにちは ", 23, "\n")</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fmt.Println("こんにちは", 23)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fmt.Println(fmt.Sprint("こんにちは ", 23))</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フォーマットされた印刷関数</font></font><code>fmt.Fprint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
とその仲間は、インターフェースを実装する任意のオブジェクトを最初の引数として受け取ります</font></font><code>io.Writer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。変数</font></font><code>os.Stdout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
と は、</font></font><code>os.Stderr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">よく知られたインスタンスです。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここから C とは異なってきます。まず、 などの数値形式は、</font></font><code>%d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
符号またはサイズのフラグを取りません。代わりに、印刷ルーチンは引数の型を使用してこれらのプロパティを決定します。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">var x uint64 = 1&lt;&lt;64 - 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fmt.Printf("%d %x; %d %x\n", x, x, int64(x), int64(x))</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
版画
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18446744073709551615 ffffffffffffffff; -1 -1
</font></font></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
整数を小数に変換するなど、デフォルトの変換だけが必要な場合は、catchall 形式</font></font><code>%v</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（「値」に使用）を使用できます。結果は、 と が生成する値</font></font><code>Print</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と全く同じです。さらに、この形式は配列、スライス、構造体、マップなど、</font><em><font style="vertical-align: inherit;">あらゆる</font></em></font><code>Println</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値を出力できます</font><font style="vertical-align: inherit;">。以下は、前のセクションで定義したタイムゾーンマップの print 文です。
</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fmt.Printf("%v\n", timeZone) // または単に fmt.Println(timeZone)
</font></font></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
出力は次のようになります。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マップ[CST:-21600 EST:-18000 MST:-25200 PST:-28800 UTC:0]
</font></font></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マップ</font></font><code>Printf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">およびフレンドの場合、出力はキーによって辞書順にソートされます。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
構造体を印刷する場合、変更された形式は</font></font><code>%+v</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構造体のフィールドにその名前で注釈を付け、任意の値については、代替形式が</font></font><code>%#v</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完全な Go 構文で値を印刷します。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T型構造体{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    整数</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    b float64</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    C文字列</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
t := &amp;T{ 7, -2.35, "abc\tdef" }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fmt.Printf("%v\n", t)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fmt.Printf("%+v\n", t)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fmt.Printf("%#v\n", t)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fmt.Printf("%#v\n", タイムゾーン)</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
版画
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&amp;{7 -2.35 abc def}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&amp;{a:7 b:-2.35 c:abc def}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&amp;main.T{a:7, b:-2.35, c:"abc\tdef"}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
map[文字列]int{"CST":-21600, "EST":-18000, "MST":-25200, "PST":-28800, "UTC":0}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（アンパサンドに注意してください。）引用符で囲まれた文字列形式は、型</font><font style="vertical-align: inherit;">または</font></font><code>%q</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型の値に適用すると、を通じても利用できます。</font><font style="vertical-align: inherit;">代替形式では、</font><font style="vertical-align: inherit;">可能な場合は代わりにバッククォートが使用されます。 （この</font><font style="vertical-align: inherit;">形式は整数とルーンにも適用され、一重引用符で囲まれたルーン定数が生成されます。） また、</font><font style="vertical-align: inherit;">は整数だけでなく文字列、バイト配列、バイトスライスにも適用され、長い 16 進文字列を生成し、形式（</font><font style="vertical-align: inherit;">）にスペースを含めると、バイト間にスペースが挿入されます。
</font></font><code>string</code><font style="vertical-align: inherit;"></font><code>[]byte</code><font style="vertical-align: inherit;"></font><code>%#q</code><font style="vertical-align: inherit;"></font><code>%q</code><font style="vertical-align: inherit;"></font><code>%x</code><font style="vertical-align: inherit;"></font><code>%&nbsp;x</code><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もう 1 つの便利な形式は で</font></font><code>%T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">値の
</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型を出力します。</font></font></em><font style="vertical-align: inherit;"></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fmt.Printf("%T\n", タイムゾーン)
</font></font></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
版画
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">map[文字列]int
</font></font></pre>
<p><font style="vertical-align: inherit;"></font><code>String() string</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カスタム型のデフォルトフォーマットを制御したい場合、その型の</font><font style="vertical-align: inherit;">
シグネチャを持つメソッドを定義するだけで済みます。今回のシンプルな型の場合</font></font><code>T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、以下のような感じになるでしょう。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func (t *T) String() 文字列 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Sprintf("%d/%g/%q", ta, tb, tc) を返します</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fmt.Printf("%v\n", t)</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
形式で印刷する
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7/-2.35/"abc\tdef"
</font></font></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(型の</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値</font></font></em><font style="vertical-align: inherit;"></font><code>T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と へのポインター</font><font style="vertical-align: inherit;">
を印刷する必要がある場合</font></font><code>T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、 のレシーバーは値型でなければなりません。この例では、構造体型ではより効率的で慣用的な方法であるため、ポインターを使用しました。</font><font style="vertical-align: inherit;">詳細については、
以下の</font><a href="https://go.dev/doc/effective_go#pointers_vs_values"><font style="vertical-align: inherit;">ポインターと値レシーバー</font></a></font><code>String</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のセクションを参照してください。)</font></font><a href="https://go.dev/doc/effective_go#pointers_vs_values"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このメソッド</font><font style="vertical-align: inherit;">は、印刷ルーチンが完全に再入可能であり、このようにラップできるため、</font></font><code>String</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">呼び出しが可能です。ただし、このアプローチには理解しておくべき重要な点が1つあります。それは、メソッド</font><font style="vertical-align: inherit;">を無限に再帰するような</font><font style="vertical-align: inherit;">呼び出し方法
で構築しない</font><font style="vertical-align: inherit;">
ことです。</font><font style="vertical-align: inherit;">
呼び出しがレシーバーを文字列として直接印刷しようとすると、メソッドが再度呼び出され、このような状況が発生する可能性があります。この例が示すように、これはよくある間違いです。
</font></font><code>Sprintf</code><font style="vertical-align: inherit;"></font><code>String</code><font style="vertical-align: inherit;"></font><code>Sprintf</code><font style="vertical-align: inherit;"></font><code>String</code><font style="vertical-align: inherit;"></font><code>Sprintf</code><font style="vertical-align: inherit;"></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MyString 文字列型</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func (m MyString) String() 文字列 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    return fmt.Sprintf("MyString=%s", m) // エラー: 永久に繰り返します。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
修正も簡単です。引数を、メソッドを持たない基本的な文字列型に変換します。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MyString 文字列型</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func (m MyString) String() 文字列 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    return fmt.Sprintf("MyString=%s", string(m)) // OK: 変換をメモします。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"></font><a href="https://go.dev/doc/effective_go#initialization"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初期化セクション</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
では、</font><font style="vertical-align: inherit;">この再帰を回避する別の手法について説明します。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別の印刷手法として、印刷ルーチンの引数を別の同様のルーチンに直接渡すという方法があります。のシグネチャでは、最終引数の</font></font><code>Printf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型</font></font><code>...interface{}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
を使用して、任意の数のパラメータ（任意の型）がフォーマットの後に続くことを指定します。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func Printf(format string, v ...interface{}) (n int, err error) {
</font></font></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数 内では</font></font><code>Printf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font><code>v</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型の変数のように動作します
</font></font><code>[]interface{}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が、別の可変長引数関数に渡されると、通常の引数リストのように動作します。以下は、上で使用した関数の実装です。</font><font style="vertical-align: inherit;">実際のフォーマット処理のために、
</font></font><code>log.Println</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引数が に直接渡されます
。</font></font><code>fmt.Sprintln</code><font style="vertical-align: inherit;"></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Println は fmt.Println と同じように標準ロガーに出力します。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func Println(v ...インターフェース{}) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    std.Output(2, fmt.Sprintln(v...)) // 出力はパラメータ（int、string）を受け取ります</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネストされた呼び出しの</font></font><code>...</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">after を</font><font style="vertical-align: inherit;">
記述して、</font><font style="vertical-align: inherit;">コンパイラーに</font><font style="vertical-align: inherit;">引数のリストとして扱うように指示します。そうでない場合は、
</font><font style="vertical-align: inherit;">単一のスライス引数として渡されます。
</font></font><code>v</code><font style="vertical-align: inherit;"></font><code>Sprintln</code><font style="vertical-align: inherit;"></font><code>v</code><font style="vertical-align: inherit;"></font><code>v</code><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
印刷にはここで説明した以外にも多くの機能があります。</font><font style="vertical-align: inherit;">詳細については
</font></font><code>godoc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッケージのドキュメントをご覧ください。</font></font><code>fmt</code><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、</font></font><code>...</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パラメータは特定の型にすることができます。たとえば、</font></font><code>...int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
整数のリストから最小のものを選択する min 関数の場合です。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">function Min(a ...int) int {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    min := int(^uint(0) &gt;&gt; 1) // 最大の整数</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    _ の場合、 i := 範囲 a {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        i &lt; min {の場合</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            最小 = i</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    戻り最小値</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<h3 id="append"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加</font></font><a href="https://go.dev/doc/effective_go#append" class="Article-idLink" aria-label="追加へ進む"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、組み込み関数の設計を説明するために必要な情報が揃いました</font></font><code>append</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。 のシグネチャは、上記の</font></font><code>append</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カスタム</font></font><code>Append</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数とは異なります。図式的に説明すると、次のようになります。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func append(スライス[] </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , 要素... </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) [] </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T</font></font></i>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T は</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任意の型のプレースホルダです。Go では、呼び出し元によって型が決定される関数を実際に記述することはできません</font></font><code>T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。そのため、</font></font><code>append</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が組み込まれており、コンパイラのサポートが必要です。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スライスの末尾に要素</font></font><code>append</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を追加し、結果を返します。手書きの と同様に</font></font><code>Append</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、基になる配列は変更される可能性があるため、結果を返す必要があります。この簡単な例
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x := []int{1,2,3}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
x = append(x, 4, 5, 6)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fmt.Println(x)</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
は を出力します</font></font><code>[1 2 3 4 5 6]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。つまり、 は</font></font><code>append</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と少し似ており</font></font><code>Printf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、任意の数の引数を収集します。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、私たちの</font></font><code>Append</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数と同じように、スライスにスライスを追加したい場合はどうすればよいでしょうか？簡単です。上記の関数</font></font><code>...</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の呼び出しと同じように、呼び出し元でを使用します</font></font><code>Output</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。このスニペットは、上記の関数と同じ出力を生成します。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x := []int{1,2,3}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
y := []int{4,5,6}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
x = append(x, y...)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fmt.Println(x)</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それがなければ</font></font><code>...</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、型が間違っているためコンパイルされません。</font></font><code>y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は型ではありません</font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>

<h2 id="initialization"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初期化</font></font><a href="https://go.dev/doc/effective_go#initialization" class="Article-idLink" aria-label="初期化へ進む"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
表面的にはCやC++の初期化とそれほど変わらないように見えますが、Goの初期化はより強力です。初期化中に複雑な構造を構築でき、初期化されたオブジェクト間の順序付けの問題、さらには異なるパッケージ間でも適切に処理されます。
</font></font></p>

<h3 id="constants"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定数</font></font><a href="https://go.dev/doc/effective_go#constants" class="Article-idLink" aria-label="定数へ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Goにおける定数は、その名の通り定数です。関数内でローカル変数として定義されている場合でも、コンパイル時に生成され、数値、文字（ルーン）、文字列、またはブール値のみを使用できます。コンパイル時の制約のため、定数を定義する式は、コンパイラによって評価可能な定数式でなければなりません。例えば、
</font></font><code>1&lt;&lt;3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は定数式ですが、 は
</font></font><code>math.Sin(math.Pi/4)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数呼び出しが</font></font><code>math.Sin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実行時に行われる必要があるため、定数式ではありません。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Goでは、列挙定数は</font></font><code>iota</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
列挙子を用いて作成されます。列挙子は</font></font><code>iota</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">式の一部にすることができ、式は暗黙的に繰り返すことができるため、複雑な値のセットを簡単に構築できます。
</font></font></p>
<div class="code">

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型 ByteSize float64</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
定数(</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    _ = iota </font></font><span class="comment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// 空の識別子に代入することで最初の値を無視する</font></font></span><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    KB バイトサイズ = 1 &lt;&lt; (10 * イオタ)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    MB</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    イギリス</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    結核</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    PB</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    EB</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ズビー</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    YB</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）</font></font><font></font>
</pre>
</div>


<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
任意のユーザー定義型にのようなメソッドをアタッチすることで、</font></font><code>String</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任意の値を自動的にフォーマットして出力できるようになります。この手法は構造体に適用されることが多いですが、 のような浮動小数点型などのスカラー型にも役立ちます</font></font><code>ByteSize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<div class="code">

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func (b ByteSize) String() 文字列 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    スイッチ {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    b &gt;= YBの場合:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        fmt.Sprintf("%.2fYB", b/YB) を返します</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    b &gt;= ZBの場合:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        fmt.Sprintf("%.2fZB", b/ZB) を返します</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    b &gt;= EB の場合:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        fmt.Sprintf("%.2fEB", b/EB) を返します</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ケース b &gt;= PB:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        fmt.Sprintf("%.2fPB", b/PB) を返します</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ケース b &gt;= TB:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        fmt.Sprintf("%.2fTB", b/TB) を返します</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ケース b &gt;= GB:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        fmt.Sprintf("%.2fGB", b/GB) を返します</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ケース b &gt;= MB:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        fmt.Sprintf("%.2fMB", b/MB) を返します</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ケース b &gt;= KB:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        fmt.Sprintf("%.2fKB", b/KB) を返します</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Sprintf("%.2fB", b) を返します</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
</div>


<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
式は</font></font><code>YB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">として出力されますが</font></font><code>1.00YB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>ByteSize(1e13)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は として出力されます</font></font><code>9.09TB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここで のメソッド</font></font><code>Sprintf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
を実装するため</font><font style="vertical-align: inherit;">
に を使用するのは</font><font style="vertical-align: inherit;">安全です (無期限に繰り返されるのを回避します)。これは、変換のためではなく</font><font style="vertical-align: inherit;">、文字列形式</font><font style="vertical-align: inherit;">ではない で を呼び出すためです。 は、文字列が必要な場合に</font><font style="vertical-align: inherit;">のみ メソッドを呼び出し</font><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">
浮動小数点値が必要です。
</font></font><code>ByteSize</code><font style="vertical-align: inherit;"></font><code>String</code><font style="vertical-align: inherit;"></font><code>Sprintf</code><font style="vertical-align: inherit;"></font><code>%f</code><font style="vertical-align: inherit;"></font><code>Sprintf</code><font style="vertical-align: inherit;"></font><code>String</code><font style="vertical-align: inherit;"></font><code>%f</code><font style="vertical-align: inherit;"></font></p>

<h3 id="variables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数</font></font><a href="https://go.dev/doc/effective_go#variables" class="Article-idLink" aria-label="変数へ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
変数は定数と同じように初期化できますが、初期化子は実行時に計算される一般的な式にすることができます。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">var (</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ホーム = os.Getenv("HOME")</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ユーザー = os.Getenv("USER")</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    gopath = os.Getenv("GOPATH")</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）</font></font><font></font>
</pre>

<h3 id="init"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">init関数</font></font><a href="https://go.dev/doc/effective_go#init" class="Article-idLink" aria-label="初期化へ進む"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"></font><code>init</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最後に、各ソース ファイルでは、必要な状態を設定するために
</font><font style="vertical-align: inherit;">
独自の niladic 関数を定義できます(実際には、各ファイルには複数の</font></font><code>init</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数を含めることができます)。そして、finally は、パッケージ内のすべての変数宣言が初期化子を評価した後で、finally:</font></font><code>init</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が呼び出され、それらの初期化子は、インポートされたすべてのパッケージが初期化された後にのみ評価されることを意味します。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
宣言として表現できない初期化の他に、</font></font><code>init</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数の一般的な用途は、実際の実行が始まる前にプログラム状態の正確さを確認または修復することです。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数init() {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ユーザー == "" の場合 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        log.Fatal("$USERが設定されていません")</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ホーム == "" の場合 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        ホーム = "/home/" + ユーザー</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    gopath == "" の場合 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        gopath = ホーム + "/go"</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    // gopath はコマンドラインの --gopath フラグによって上書きされる可能性があります。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    flag.StringVar(&amp;gopath, "gopath", gopath, "デフォルトの GOPATH をオーバーライド")</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<h2 id="methods"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッド</font></font><a href="https://go.dev/doc/effective_go#methods" class="Article-idLink" aria-label="メソッドに移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>

<h3 id="pointers_vs_values"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポインタと値</font></font><a href="https://go.dev/doc/effective_go#pointers_vs_values" class="Article-idLink" aria-label="ポインター対値に移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
で見たように</font></font><code>ByteSize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、メソッドは任意の名前付き型 (ポインタまたはインターフェースを除く) に対して定義できます。レシーバは構造体である必要はありません。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スライスの説明では、関数を記述しました</font></font><code>Append</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。これをスライスのメソッドとして定義することもできます。そのためには、まずメソッドをバインドできる名前付き型を宣言し、次にメソッドのレシーバーをその型の値にします。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型 ByteSlice []byte</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func (スライスByteSlice) Append(データ[]byte) []byte {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    // 本文は上記で定義した Append 関数とまったく同じです。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この方法では、メソッドは更新されたスライスを返す必要があります。この不便さは、メソッドを
</font><font style="vertical-align: inherit;">a への</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポインタ</font></font></i><font style="vertical-align: inherit;"></font><code>ByteSlice</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をレシーバとして受け取るように再定義することで解消できます。これにより、メソッドは呼び出し元のスライスを上書きできるようになります。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func (p *ByteSlice) Append(data []byte) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    スライス := *p</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    // 本文は上記と同じですが、戻り値は除きます。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    *p = スライス</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、もっと良い方法があります。関数を標準的な</font></font><code>Write</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッドのように修正すれば、
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func (p *ByteSlice) Write(data []byte) (n int, err error) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    スライス := *p</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    // 上記と同じです。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    *p = スライス</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    len(data)、nilを返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すると、その型は</font></font><code>*ByteSlice</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">標準インターフェースを満たすので
</font></font><code>io.Writer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">便利です。例えば、そのインターフェースに出力することができます。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    var b バイトスライス</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Fprintf(&amp;b, "この時間は%d日です\n", 7)</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のみを満たす</font></font><code>ByteSlice</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ため、</font><font style="vertical-align: inherit;">
a のアドレスを渡します</font><font style="vertical-align: inherit;">。レシーバーにおけるポインタと値に関するルールは、値メソッドはポインタと値の両方で呼び出すことができますが、ポインタメソッドはポインタでのみ呼び出すことができるというものです。
</font></font><code>*ByteSlice</code><font style="vertical-align: inherit;"></font><code>io.Writer</code><font style="vertical-align: inherit;"></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このルールは、ポインタメソッドがレシーバーを変更できるという理由で発生します。ポインタメソッドを値に対して呼び出すと、メソッドは値のコピーを受け取るため、変更内容は破棄されてしまいます。そのため、言語はこの誤りを許しません。ただし、便利な例外があります。値がアドレス指定可能な場合、言語はアドレス演算子を自動的に挿入することで、値に対してポインタメソッドを呼び出すという一般的なケースに対応します。この例では、変数は</font></font><code>b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アドレス指定可能なので、</font></font><code>Write</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">だけでメソッドを呼び出すことができます</font></font><code>b.Write</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。コンパイラはこれを に書き換えます</font></font><code>(&amp;b).Write</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、</font></font><code>Write</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バイトのスライスで を使用するというアイデアは、 の実装の中心です</font></font><code>bytes.Buffer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>

<h2 id="interfaces_and_types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェースとその他の型</font></font><a href="https://go.dev/doc/effective_go#interfaces_and_types" class="Article-idLink" aria-label="インターフェースとタイプに移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>

<h3 id="interfaces"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェース</font></font><a href="https://go.dev/doc/effective_go#interfaces" class="Article-idLink" aria-label="インターフェースへ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go のインターフェースは、オブジェクトの振る舞いを指定する手段を提供します。つまり、何かが</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これを</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行うことができれば、それを
</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここで</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用できます。既にいくつかの簡単な例を見てきました。カスタムプリンターは</font></font><code>String</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッドで実装でき、メソッドはメソッド</font></font><code>Fprintf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を持つ任意のデバイスに出力を生成できます</font></font><code>Write</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。Go コードでは、1 つまたは 2 つのメソッドのみを持つインターフェースが一般的であり、通常はメソッドに由来する名前が付けられます（例:</font></font><code>io.Writer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
を実装するもの）</font></font><code>Write</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型は複数のインターフェースを実装できます。例えば、コレクションが 、 、
</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">含むを実装し</font><font style="vertical-align: inherit;">、さらにカスタムフォーマッタ</font></font><code>sort</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を持つ場合、その
</font><font style="vertical-align: inherit;">
パッケージ内のルーチンでソートできます。この不自然な例では、 は</font><font style="vertical-align: inherit;">両方の条件を満たしています。
</font></font><code>sort.Interface</code><font style="vertical-align: inherit;"></font><code>Len()</code><font style="vertical-align: inherit;"></font><code>Less(i, j int) bool</code><font style="vertical-align: inherit;"></font><code>Swap(i, j int)</code><font style="vertical-align: inherit;"></font><code>Sequence</code><font style="vertical-align: inherit;"></font></p>
<div class="code">

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型 Sequence []int</font></font><font></font>
<font></font>
<span class="comment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// sort.Interface に必要なメソッド。</font></font></span><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func (s シーケンス) Len() int {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    レンズを返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func (s シーケンス) Less(i, j int) bool {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    s[i] &lt; s[j]を返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func (s シーケンス) Swap(i, j int) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    s[i], s[j] = s[j], s[i]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
<font></font>
<span class="comment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Copy はシーケンスのコピーを返します。</font></font></span><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func (s シーケンス) Copy() シーケンス {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    コピー := make(シーケンス, 0, 長さ(s))</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    append(copy, s...) を返します</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
<font></font>
<span class="comment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// 印刷メソッド - 印刷前に要素を並べ替えます。</font></font></span><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func (s シーケンス) String() 文字列 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    s = s.Copy() </font></font><span class="comment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// コピーを作成します。引数を上書きしないでください。</font></font></span><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    sort.ソート(s)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    文字列 := "["</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    for i, elem := range s { </font></font><span class="comment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// ループは O(N²) です。次の例で修正します。</font></font></span><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        i &gt; 0 の場合 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            str += " "</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        str += fmt.Sprint(要素)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    str + "]" を返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
</div>



<h3 id="conversions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変換</font></font><a href="https://go.dev/doc/effective_go#conversions" class="Article-idLink" aria-label="コンバージョンへ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"></font><code>String</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の方法は</font><font style="vertical-align: inherit;">
、スライスに対して既に行われている</font></font><code>Sequence</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作業を再現するものです。 （これも計算量 O(N²) であり、貧弱です。）</font><font style="vertical-align: inherit;">を呼び出す前にを</font><font style="vertical-align: inherit;">プレーンな に
</font></font><code>Sprint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変換すれば、労力を分散でき、処理速度も向上します</font><font style="vertical-align: inherit;">。
</font></font><code>Sequence</code><font style="vertical-align: inherit;"></font><code>[]int</code><font style="vertical-align: inherit;"></font><code>Sprint</code><font style="vertical-align: inherit;"></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func (s シーケンス) String() 文字列 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    s = s.コピー()</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    sort.ソート(s)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Sprint([]int(s)) を返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"></font><code>Sprintf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このメソッドは、メソッドから安全に</font><font style="vertical-align: inherit;">
呼び出すための変換テクニックのもう一つの例です
</font></font><code>String</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。型名を無視すれば、2つの型（</font></font><code>Sequence</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>[]int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）は同じなので、これらの間で変換することは可能です。この変換によって新しい値が作成されるわけではなく、一時的に既存の値が新しい型になったかのように動作するだけです。（整数から浮動小数点への変換など、新しい値を作成する有効な変換は他にもあります。）
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Goプログラムでは、式の型を変換して別のメソッドセットにアクセスするのが慣用句です。例えば、既存の型を使って</font></font><code>sort.IntSlice</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例全体を次のように簡略化できます。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型 Sequence []int</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// 印刷メソッド - 印刷前に要素をソートします</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func (s シーケンス) String() 文字列 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    s = s.コピー()</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    sort.IntSlice(s).Sort()</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Sprint([]int(s)) を返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
複数のインターフェース（ソートと出力）を実装する代わりに、データ項目を複数の型（ </font><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">
、 ）</font></font><code>Sequence</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に変換できる機能を利用します</font><font style="vertical-align: inherit;">。これらの型はそれぞれ処理の一部を実行します。これは実際にはあまり一般的ではありませんが、効果的です。
</font></font><code>Sequence</code><font style="vertical-align: inherit;"></font><code>sort.IntSlice</code><font style="vertical-align: inherit;"></font><code>[]int</code><font style="vertical-align: inherit;"></font></p>

<h3 id="interface_conversions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェース変換と型アサーション</font></font><a href="https://go.dev/doc/effective_go#interface_conversions" class="Article-idLink" aria-label="interface_conversionsへ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p>
<a href="https://go.dev/doc/effective_go#type_switch"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型スイッチは</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変換の一種です。インターフェースを受け取り、スイッチ内の各ケースについて、ある意味でそのケースの型に変換します。以下のコードでは、</font></font><code>fmt.Printf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型スイッチを使って値を文字列に変換する方法を簡略化して示します。既に文字列の場合は、インターフェースが保持する実際の文字列値を取得し、メソッドがある場合は、
</font></font><code>String</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そのメソッドを呼び出した結果を取得します。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stringer型インターフェース{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    文字列() 文字列</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
var value interface{} // 呼び出し元によって提供される値。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スイッチ str := value.(type) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ケース文字列:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    文字列を返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ケースストリンガー:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    str.String() を返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のケースは具体的な値を見つけ、2番目のケースはインターフェースを別のインターフェースに変換します。このように型を混在させても全く問題ありません。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
必要な型が1つだけの場合はどうすればよいでしょうか？値がaを保持していることがわかっていて</font></font><code>string</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
、それを抽出したいだけの場合はどうでしょうか？1ケースの型スイッチで十分ですが、</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型アサーション</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">でも同様です。型アサーションはインターフェース値を受け取り、そこから指定された明示的な型の値を抽出します。構文は型スイッチの開始句と同じですが、キーワードではなく明示的な型を使用します</font></font><code>type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値。(typeName)
</font></font></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果は静的型 を持つ新しい値です</font></font><code>typeName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。この型は、インターフェースが保持する具体的な型、または値を変換できる別のインターフェース型のいずれかである必要があります。値に含まれる文字列を抽出するには、次のように記述します。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">str := 値.(文字列)
</font></font></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、値に文字列が含まれていない場合、プログラムは実行時エラーでクラッシュします。これを防ぐには、「カンマ、OK」イディオムを使用して、値が文字列かどうかを安全にテストします。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">str, ok := value.(文字列)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
大丈夫なら{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Printf("文字列の値は: %q\n", str)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
} それ以外 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Printf("値は文字列ではありません\n")</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
型アサーションが失敗した場合、</font></font><code>str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は依然として存在し、型は文字列ですが、値はゼロ、つまり空の文字列になります。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
機能の例として、</font><font style="vertical-align: inherit;">
このセクションの冒頭で示した type switch と同等の
</font></font><code>if</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-ステートメントを次に示します。</font></font><code>else</code><font style="vertical-align: inherit;"></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strの場合、ok:=value.(文字列); ok {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    文字列を返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
} それ以外の場合、str の場合、ok := value.(Stringer); ok {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    str.String() を返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<h3 id="generality"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一般性</font></font><a href="https://go.dev/doc/effective_go#generality" class="Article-idLink" aria-label="一般論へ進む"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
型がインターフェースを実装するためだけに存在し、そのインターフェースを超えてメソッドをエクスポートしない場合は、型自体をエクスポートする必要はありません。インターフェースのみをエクスポートすることで、その値がインターフェースで記述されている以上の動作を持たないことが明確になります。また、共通メソッドのすべてのインスタンスについてドキュメントを繰り返す必要もありません。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このような場合、コンストラクタは実装型ではなくインターフェース値を返す必要があります。例えば、ハッシュライブラリでは</font></font><code>crc32.NewIEEE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、 と はどちらも</font></font><code>adler32.New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インターフェース型 を返します</font></font><code>hash.Hash32</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。GoプログラムでAdler-32アルゴリズムをCRC-32に置き換えるには、コンストラクタの呼び出しを変更するだけで済みます。アルゴリズムの変更はコードの残りの部分には影響しません。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同様のアプローチにより、様々な</font></font><code>crypto</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッケージに含まれるストリーミング暗号アルゴリズムを、それらが連鎖するブロック暗号から分離することが可能になります。パッケージ</font></font><code>Block</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内のインターフェースは</font></font><code>crypto/cipher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、単一のデータブロックの暗号化を提供するブロック暗号の動作を指定します。そして、パッケージと同様に、このインターフェースを実装する暗号パッケージは、</font><font style="vertical-align: inherit;">ブロック暗号化の詳細を知らなくても、インターフェース
</font></font><code>bufio</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で表されるストリーミング暗号を構築するために使用できます。</font></font><code>Stream</code><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インターフェース  </font></font><code>crypto/cipher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は次のようになります。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型ブロックインターフェース{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ブロックサイズ() int</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    暗号化(dst, src []byte)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    復号化(dst, src []byte)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ストリーム型インターフェース{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    XORキーストリーム(dst, src []byte)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下は、ブロック暗号をストリーミング暗号に変換するカウンター モード (CTR) ストリームの定義です。ブロック暗号の詳細が抽象化されていることに注意してください。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// NewCTRは指定されたブロックを使用して暗号化/復号化するストリームを返します</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// カウンターモード。ivの長さはブロックのブロックサイズと同じである必要があります。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func NewCTR(block ブロック, iv []byte) ストリーム</font></font><font></font>
</pre>
<p>
<code>NewCTR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、特定の暗号化アルゴリズムとデータソースだけでなく、</font></font><code>Block</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェースの任意の実装と任意
の に適用されます</font></font><code>Stream</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これらはインターフェース値を返すため、CTR暗号化を他の暗号化モードに置き換えることは局所的な変更です。コンストラクタ呼び出しを編集する必要がありますが、周囲のコードは結果を としてのみ扱うため</font></font><code>Stream</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、違いは認識されません。
</font></font></p>

<h3 id="interface_methods"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェースとメソッド</font></font><a href="https://go.dev/doc/effective_go#interface_methods" class="Article-idLink" aria-label="interface_methodsへ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ほとんどあらゆるものにメソッドを付与できるため、ほぼあらゆるものがインターフェースを満たすことができます。一例として</font></font><code>http</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
、</font></font><code>Handler</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェースを定義するパッケージが挙げられます。このインターフェースを実装するオブジェクトはすべて、</font></font><code>Handler</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTPリクエストを処理できます。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型ハンドラーインターフェース{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ServeHTTP(レスポンスライター、*リクエスト)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p>
<code>ResponseWriter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、クライアントにレスポンスを返すために必要なメソッドへのアクセスを提供するインターフェースです。これらのメソッドには標準</font></font><code>Write</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッドも含まれているため、
が</font><font style="vertical-align: inherit;">
使用できる
</font></font><code>http.ResponseWriter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">場所であればどこでも を使用できます。 は</font><font style="vertical-align: inherit;">、クライアントからのリクエストを解析した表現を含む構造体です。
</font></font><code>io.Writer</code><font style="vertical-align: inherit;"></font><code>Request</code><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
簡潔にするために、POSTを無視し、HTTPリクエストは常にGETであると仮定しましょう。この単純化はハンドラーの設定方法に影響を与えません。以下は、ページへのアクセス回数をカウントするハンドラーの簡単な実装です。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// シンプルなカウンターサーバー。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カウンター構造体型{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    n 整数</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func (ctr *Counter) ServeHTTP(w http.ResponseWriter, req *http.Request) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ctr.n++</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Fprintf(w, "カウンター = %d\n", ctr.n)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（テーマに沿って、</font></font><code>Fprintf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が に印刷する
方法に注目してください</font></font><code>http.ResponseWriter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。）実際のサーバーでは、 へのアクセスは</font></font><code>ctr.n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同時アクセスから保護する必要があります。推奨事項については、</font></font><code>sync</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><code>atomic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッケージを参照してください。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
参考までに、このようなサーバーを URL ツリーのノードに接続する方法は次のとおりです。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「net/http」をインポートする</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ctr := new(カウンター)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
http.Handle("/counter", ctr)</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
でも、なぜ</font></font><code>Counter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構造体を作るのでしょうか？必要なのは整数だけです。（呼び出し側が増分を見ることができるように、受信側はポインタである必要があります。）
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// よりシンプルなカウンターサーバー。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カウンター型 int</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func (ctr *Counter) ServeHTTP(w http.ResponseWriter, req *http.Request) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    *ctr++</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Fprintf(w, "カウンター = %d\n", *ctr)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プログラムに、ページがアクセスされたことを通知する必要がある内部状態がある場合はどうすればよいでしょうか。チャネルを Web ページに結び付けます。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// 訪問ごとに通知を送信するチャネル。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// (おそらくチャネルをバッファリングする必要があります。)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chan chan *http.Requestと入力する</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func (ch Chan) ServeHTTP(w http.ResponseWriter, req *http.Request) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ch &lt;- 必須</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Fprint(w, "通知を送信しました")</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、サーバーバイナリの呼び出し時に使用される引数を表示したいとします</font></font><code>/args</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。引数を出力する関数を書くのは簡単です。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ArgServer()関数{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Println(os.Args)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これをHTTPサーバーにするにはどうすればよいでしょうか？</font></font><code>ArgServer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
何らかの型のメソッドを作成し、その値を無視することもできますが、もっと簡潔な方法があります。ポインタとインターフェースを除くあらゆる型に対してメソッドを定義できるので、関数に対してメソッドを書くことができます。</font></font><code>http</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッケージには次のコードが含まれています。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// HandlerFunc型は、</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// HTTPハンドラとしての通常の関数。fが関数の場合</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// 適切なシグネチャを持つHandlerFunc(f)は</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// f を呼び出すハンドラー オブジェクト。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
型HandlerFunc func(ResponseWriter, *Request)</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// ServeHTTP は f(w, req) を呼び出します。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func (f HandlerFunc) ServeHTTP(w ResponseWriter, req *Request) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    f(w, 要求)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p>
<code>HandlerFunc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はメソッド を持つ型なので</font></font><code>ServeHTTP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、その型の値はHTTPリクエストに対応できます。メソッドの実装を見てください。レシーバーは関数 で</font></font><code>f</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、メソッドは を呼び出します</font></font><code>f</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。奇妙に思えるかもしれませんが、例えばレシーバーがチャネルでメソッドがそのチャネルに送信するのとそれほど違いはありません。
</font></font></p>
<p><font style="vertical-align: inherit;"></font><code>ArgServer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP サーバーに
</font><font style="vertical-align: inherit;">
するには、まず適切な署名を持つように変更します。</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// 引数サーバー。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func ArgServer(w http.ResponseWriter, req *http.Request) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Fprintln(w, os.Args)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p>
<code>ArgServer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は と同じシグネチャを持つようになったため、</font><font style="vertical-align: inherit;">
にアクセスする</font></font><code>HandlerFunc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ために を に変換したのと同じように、 を に変換してそのメソッドにアクセスできるように</font></font><code>Sequence</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">なり</font><font style="vertical-align: inherit;">ました。これを設定するコードは簡潔です。
</font></font><code>IntSlice</code><font style="vertical-align: inherit;"></font><code>IntSlice.Sort</code><font style="vertical-align: inherit;"></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http.Handle("/args", http.HandlerFunc(ArgServer))
</font></font></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
誰かがページ にアクセスすると</font></font><code>/args</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、そのページに設置されたハンドラは値</font></font><code>ArgServer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
と型を持ちます</font></font><code>HandlerFunc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。HTTPサーバーは、</font><font style="vertical-align: inherit;">レシーバとして
</font></font><code>ServeHTTP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
を使用し、その型のメソッドを呼び出します。このメソッドは （</font><font style="vertical-align: inherit;">
内の</font><font style="vertical-align: inherit;">呼び出しを介して</font><font style="vertical-align: inherit;">） を呼び出します。そして、引数が表示されます。
</font></font><code>ArgServer</code><font style="vertical-align: inherit;"></font><code>ArgServer</code><font style="vertical-align: inherit;"></font><code>f(w, req)</code><font style="vertical-align: inherit;"></font><code>HandlerFunc.ServeHTTP</code><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このセクションでは、構造体、整数、チャネル、および関数から HTTP サーバーを作成しました。これは、インターフェースがメソッドのセットにすぎず、ほぼすべての型に対して定義できるためです。
</font></font></p>

<h2 id="blank"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空白の識別子</font></font><a href="https://go.dev/doc/effective_go#blank" class="Article-idLink" aria-label="空白へ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>

<p><font style="vertical-align: inherit;"></font><a href="https://go.dev/doc/effective_go#for"><code>for</code> <code>range</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ループ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
や</font></font><a href="https://go.dev/doc/effective_go#maps"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マップ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
の文脈で、ブランク識別子について何度か触れてきました
</font><font style="vertical-align: inherit;">。ブランク識別子には、任意の型の任意の値を代入または宣言することができ、その値は無害に破棄されます。これはUnix</font></font><code>/dev/null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルへの書き込みに少し似ています。つまり、書き込み専用の値を表すもので、変数は必要だが実際の値は関係ない場合にプレースホルダーとして使用されます。これまでに見てきた以外にも、様々な用途があります。
</font></font></p>

<h3 id="blank_assign"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多重代入における空白識別子</font></font><a href="https://go.dev/doc/effective_go#blank_assign" class="Article-idLink" aria-label="空白の割り当てに移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ループ内での空白識別子の使用は、</font></font><code>for</code> <code>range</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一般的な状況である多重割り当ての特殊なケースです。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
代入式の左辺に複数の値が必要で、そのうちの1つの値がプログラムで使用されない場合には、代入式の左辺に空白の識別子を指定することで、ダミー変数を作成する必要がなくなり、その値が破棄されることが明確になります。例えば、値とエラーを返す関数を呼び出す場合、重要なのはエラー値のみであれば、空白の識別子を使用することで、関係のない値を破棄することができます。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_の場合、err := os.Stat(path); os.IsNotExist(err) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Printf("%sは存在しません\n", パス)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
時々、エラーを無視するためにエラー値を破棄するコードを見かけますが、これは非常に悪い習慣です。エラーの戻り値は必ず確認してください。エラー値には何らかの理由があるはずです。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// 悪い例です。パスが存在しない場合はこのコードはクラッシュします。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fi, _ := os.Stat(パス)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fi.IsDir() の場合 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Printf("%sはディレクトリです\n", パス)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<h3 id="blank_unused"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未使用のインポートと変数</font></font><a href="https://go.dev/doc/effective_go#blank_unused" class="Article-idLink" aria-label="空白_未使用に移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パッケージをインポートしたり、変数を宣言したにもかかわらず使用しなかったりするのはエラーです。未使用のインポートはプログラムを肥大化させ、コンパイル速度を低下させます。一方、初期化されているにもかかわらず使用されていない変数は、少なくとも無駄な計算であり、より大きなバグの兆候となる可能性があります。しかし、プログラムの開発が活発に行われている場合、未使用のインポートや変数が頻繁に発生し、コンパイルを続行するためにそれらを削除しても、後で再び必要になるという煩わしさがあります。ブランク識別子は、この問題の回避策となります。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この書きかけのプログラムには、未使用のインポート (</font></font><code>fmt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>io</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) と未使用の変数 ( </font></font><code>fd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) が 2 つあるため、コンパイルされませんが、ここまでのコードが正しいかどうかを確認するとよいでしょう。
</font></font></p>
<div class="code">

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッケージメイン</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
輸入 （</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    「fmt」</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    「イオ」</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    "ログ"</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    「オス」</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数main() {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fd, err := os.Open("test.go")</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    err != nil の場合</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        ログ.致命的(エラー)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font>
    <span class="comment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// TODO: fd を使用します。</font></font></span><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
</div>


<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
未使用のインポートに関するエラーを抑止するには、インポートされたパッケージのシンボルを参照するために空の識別子を使用します。同様に、未使用の変数を</font></font><code>fd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
空の識別子に代入すると、未使用変数エラーは抑止されます。このバージョンのプログラムはコンパイル可能です。
</font></font></p>
<div class="code">

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッケージメイン</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
輸入 （</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    「fmt」</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    「イオ」</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    "ログ"</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    「オス」</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
var _ = fmt.Printf </font></font><span class="comment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// デバッグ用。完了したら削除します。</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
var _ io.Reader     </font></font><span class="comment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// デバッグ用。完了したら削除します。</font></font></span><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数main() {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fd, err := os.Open("test.go")</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    err != nil の場合</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        ログ.致命的(エラー)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font>
    <span class="comment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// TODO: fd を使用します。</font></font></span><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    _ = fd</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
</div>



<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
慣例により、インポート エラーを黙らせるグローバル宣言は、簡単に見つけられるようにするためと、後でクリーンアップするためのリマインダーとして、インポートの直後にコメントを付ける必要があります。
</font></font></p>

<h3 id="blank_import"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">副作用のためのインポート</font></font><a href="https://go.dev/doc/effective_go#blank_import" class="Article-idLink" aria-label="空白のインポートに移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前の例の</font></font><code>fmt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">や のよう</font><font style="vertical-align: inherit;">
な未使用のインポートは、最終的には使用するか削除する必要があります。空の代入は、コードが開発中であることを示します。しかし、明示的な使用を伴わずに、副作用のためだけにパッケージをインポートすることが有用な場合もあります。例えば、パッケージは関数の</font><font style="vertical-align: inherit;">実行中に、</font><font style="vertical-align: inherit;">
デバッグ情報を提供するHTTPハンドラーを登録します。APIはエクスポートされていますが、ほとんどのクライアントはハンドラーの登録のみを必要とし、Webページを介してデータにアクセスします。副作用のためだけにパッケージをインポートするには、パッケージ名を空の識別子に変更します。
</font></font><code>io</code><font style="vertical-align: inherit;"></font><code>init</code><font style="vertical-align: inherit;"></font><code><a href="https://go.dev/pkg/net/http/pprof/">net/http/pprof</a></code><font style="vertical-align: inherit;"></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_ "net/http/pprof" をインポートします
</font></font></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この形式のインポートでは、パッケージが副作用のためにインポートされていることが明確になります。これは、パッケージを他に使用できる可能性がないためです。このファイルでは、パッケージに名前がありません。（もし名前があり、その名前を使用しなかった場合、コンパイラはプログラムを拒否します。）
</font></font></p>

<h3 id="blank_implements"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェースチェック</font></font><a href="https://go.dev/doc/effective_go#blank_implements" class="Article-idLink" aria-label="空白の実装に移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"></font><a href="https://go.dev/doc/effective_go#interfaces_and_types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前述のインターフェース</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
の説明で述べたように</font><font style="vertical-align: inherit;">、型はインターフェースを実装することを明示的に宣言する必要はありません。インターフェースのメソッドを実装するだけで、型はインターフェースを実装します。実際には、ほとんどのインターフェース変換は静的であるため、コンパイル時にチェックされます。例えば、</font></font><code>*os.File</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を期待する関数に を渡した場合、 がインターフェース</font><font style="vertical-align: inherit;">を実装してい</font></font><code>io.Reader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ない限りコンパイルされません
</font><font style="vertical-align: inherit;">。
</font></font><code>*os.File</code><font style="vertical-align: inherit;"></font><code>io.Reader</code><font style="vertical-align: inherit;"></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、一部のインターフェースチェックは実行時に行われます。1つのインスタンスはインターフェース</font></font><code><a href="https://go.dev/pkg/encoding/json/">encoding/json</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
を定義するパッケージ内にあります</font></font><code><a href="https://go.dev/pkg/encoding/json/#Marshaler">Marshaler</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。JSONエンコーダーは、そのインターフェースを実装する値を受け取ると、標準的な変換ではなく、値のマーシャリングメソッドを呼び出してJSONに変換します。エンコーダーは、実行時に次のような</font></font><a href="https://go.dev/doc/effective_go#interface_conversions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型アサーション</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用してこのプロパティをチェックします。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m, ok := val.(json.Marshaler)
</font></font></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際にインターフェース自体を使用せずに、型がインターフェースを実装しているかどうかを確認することだけが必要な場合 (たとえばエラー チェックの一部として) は、空の識別子を使用して型アサートされた値を無視します。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_ の場合、ok := val.(json.Marshaler); ok {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    fmt.Printf("型%Tの値%vはjson.Marshalerを実装しています\n", val, val)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このような状況が発生するケースの一つは、パッケージ内で型を実装する際に、それが実際にインターフェースを満たしていることを保証する必要がある場合です。例えば、型が
</font></font><code><a href="https://go.dev/pkg/encoding/json/#RawMessage">json.RawMessage</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カスタムJSON表現を必要とする場合、 を実装する必要があります
</font></font><code>json.Marshaler</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が、コンパイラがこれを自動的に検証するような静的変換は存在しません。型が誤ってインターフェースを満たさない場合、JSONエンコーダは引き続き動作しますが、カスタム実装は使用されません。実装が正しいことを保証するために、パッケージ内で空白識別子を使用したグローバル宣言を使用できます。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">var _ json.Marshaler = (*RawMessage)(nil)
</font></font></pre>
<p><font style="vertical-align: inherit;"></font><code>*RawMessage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この宣言では、aから a へ</font><font style="vertical-align: inherit;">
の変換を伴う代入は
を</font><font style="vertical-align: inherit;">実装する</font></font><code>Marshaler</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ことを必要とし</font><font style="vertical-align: inherit;">、そのプロパティはコンパイル時にチェックされます。</font><font style="vertical-align: inherit;">インターフェースが変更された場合、このパッケージはコンパイルされなくなり、更新が必要であることが通知されます。
</font></font><code>*RawMessage</code><font style="vertical-align: inherit;"></font><code>Marshaler</code><font style="vertical-align: inherit;"></font><code>json.Marshaler</code><font style="vertical-align: inherit;"></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この構文に空白識別子が出現することは、宣言が型チェックのためだけに存在し、変数を作成するためではないことを示しています。ただし、インターフェースを満たすすべての型に対してこれを行う必要はありません。慣例的に、このような宣言はコード内に静的変換が既に存在しない場合にのみ使用されますが、これは稀なケースです。
</font></font></p>


<h2 id="embedding"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">埋め込み</font></font><a href="https://go.dev/doc/effective_go#embedding" class="Article-idLink" aria-label="埋め込みへ進む"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go では、サブクラス化という典型的な型駆動の概念は提供されていませんが、構造体またはインターフェース内に型
</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を埋め込む</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ことによって実装の一部を「借用」する機能はあります。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インターフェースの埋め込みは非常に簡単です。</font></font><code>io.Reader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>io.Writer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェースについては既に説明しました。それぞれの定義は次のとおりです。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型リーダーインターフェース{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    読み取り(p []byte) (n int, err エラー)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
型Writerインターフェース{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    書き込み(p []byte) (n int, err エラー)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この</font></font><code>io</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッケージは、複数のメソッドを実装できるオブジェクトを指定するための他のインターフェースもいくつかエクスポートしています。例えば、 は</font><font style="vertical-align: inherit;">と の</font></font><code>io.ReadWriter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">両方を含むインターフェースです</font><font style="vertical-align: inherit;">。2つのメソッドを明示的に列挙して指定することもできます</font><font style="vertical-align: inherit;">が、次のように2つのインターフェースを埋め込んで新しいインターフェースを形成する方が簡単で分かりやすいでしょう。
</font></font><code>Read</code><font style="vertical-align: inherit;"></font><code>Write</code><font style="vertical-align: inherit;"></font><code>io.ReadWriter</code><font style="vertical-align: inherit;"></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// ReadWriter は、Reader インターフェースと Writer インターフェースを組み合わせたインターフェースです。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ReadWriter型インターフェース{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    リーダー</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ライター</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは文字通りの意味です。Aは</font></font><code>ReadWriter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font><em><font style="vertical-align: inherit;">と</font></em><font style="vertical-align: inherit;">a</font></font><code>Reader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が行うことを実行できます</font><font style="vertical-align: inherit;">
。つまり、埋め込まれたインターフェースの結合体です。インターフェース内に埋め込むことができるのはインターフェースだけです。
</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><code>Writer</code><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同じ基本的な考え方は構造体にも当てはまりますが、より広範な影響を及ぼします。</font></font><code>bufio</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッケージには2つの構造体型、
</font></font><code>bufio.Reader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とがあり</font></font><code>bufio.Writer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、それぞれがパッケージの類似のインターフェースを実装しています
</font></font><code>io</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。また、</font></font><code>bufio</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バッファ付きリーダー/ライターも実装しています。これは、埋め込みを用いてリーダーとライターを1つの構造体に組み合わせることで実現されています。つまり、構造体内に型を列挙しますが、フィールド名は付与しません。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// ReadWriter は Reader と Writer へのポインターを格納します。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// io.ReadWriter を実装します。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ReadWriter構造体型{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    *リーダー // *bufio.Reader</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    *ライター // *bufio.Writer</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
埋め込まれた要素は構造体へのポインタであり、当然ながら使用する前に有効な構造体を指すように初期化する必要があります。</font></font><code>ReadWriter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構造体は次のように記述できます。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReadWriter構造体型{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    読者 *読者</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ライター *ライター</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、フィールドのメソッドを促進し、</font></font><code>io</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェースを満たすためには、次のような転送メソッドも提供する必要があります。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func (rw *ReadWriter) Read(p []byte) (n int, err error) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    rw.reader.Read(p) を返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
構造体を直接埋め込むことで、このような管理を回避できます。埋め込み型のメソッドは無料で提供されるため、は</font><font style="vertical-align: inherit;">と の</font></font><code>bufio.ReadWriter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メソッドを持つだけでなく、 </font><font style="vertical-align: inherit;">、
 </font><font style="vertical-align: inherit;">、 の
</font><font style="vertical-align: inherit;">3つのインターフェースすべてを満たします
</font><font style="vertical-align: inherit;">。
</font></font><code>bufio.Reader</code><font style="vertical-align: inherit;"></font><code>bufio.Writer</code><font style="vertical-align: inherit;"></font><code>io.Reader</code><font style="vertical-align: inherit;"></font><code>io.Writer</code><font style="vertical-align: inherit;"></font><code>io.ReadWriter</code><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
埋め込みとサブクラス化には重要な違いがあります。型を埋め込むと、その型のメソッドは外側の型のメソッドになりますが、呼び出される際には、メソッドのレシーバーは外側の型ではなく内側の型になります。この例では、</font></font><code>Read</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a のメソッド</font></font><code>bufio.ReadWriter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が呼び出されると、上で説明した転送メソッドと全く同じ効果が得られます。レシーバーは</font></font><code>reader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のフィールドであり</font></font><code>ReadWriter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
</font></font><code>ReadWriter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自体ではありません。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
埋め込みは、単純な利便性にも役立ちます。この例では、埋め込みフィールドと通常の名前付きフィールドを並べて表示しています。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ジョブ構造体型{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    コマンド文字列</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    *log.ロガー</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"></font><code>Job</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これで、型には、、、その他のメソッドが追加されました</font><font style="vertical-align: inherit;">
。</font></font><code>Print</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">もちろん</font><font style="vertical-align: inherit;">
、</font></font><code>Printf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">にフィールド名</font><font style="vertical-align: inherit;">を付けることもできます</font><font style="vertical-align: inherit;">
が、必ずしもそうする必要はありません。これで初期化が完了したので、 にログ出力できるようになりました</font><font style="vertical-align: inherit;">。
</font></font><code>Println</code><font style="vertical-align: inherit;"></font><code>*log.Logger</code><font style="vertical-align: inherit;"></font><code>Logger</code><font style="vertical-align: inherit;"></font><code>Job</code><font style="vertical-align: inherit;"></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">job.Println("ただいまから開始します...")
</font></font></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
は構造体</font></font><code>Logger</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の通常のフィールドなので、</font><font style="vertical-align: inherit;">次のように
</font></font><code>Job</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のコンストラクタ内で通常の方法で初期化できます。</font></font><code>Job</code><font style="vertical-align: inherit;"></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func NewJob(コマンド文字列, ロガー *log.Logger) *Job {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    &amp;Job{コマンド、ロガー}を返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
または複合リテラルで、
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">job := &amp;Job{command, log.New(os.Stderr, "Job: ", log.Ldate)}
</font></font></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
埋め込みフィールドを直接参照する必要がある場合、パッケージ修飾子を無視したフィールドの型名が、構造</font></font><code>Read</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">体のメソッドと同様にフィールド名として機能します。ここで、</font><font style="vertical-align: inherit;">変数</font><font style="vertical-align: inherit;">の</font></font><code>ReadWriter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">にアクセスする必要がある場合は
</font><font style="vertical-align: inherit;">と記述します</font><font style="vertical-align: inherit;">。これは のメソッドを改良したい場合に便利です</font><font style="vertical-align: inherit;">。
</font></font><code>*log.Logger</code><font style="vertical-align: inherit;"></font><code>Job</code><font style="vertical-align: inherit;"></font><code>job</code><font style="vertical-align: inherit;"></font><code>job.Logger</code><font style="vertical-align: inherit;"></font><code>Logger</code><font style="vertical-align: inherit;"></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func (job *Job) Printf(format string, args ...interface{}) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    job.Logger.Printf("%q: %s", job.Command, fmt.Sprintf(format, args...))</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
埋め込み型は名前の衝突という問題を引き起こしますが、解決方法は単純です。まず、フィールドまたはメソッドは、</font><font style="vertical-align: inherit;">その型のより深くネストされた部分にある</font></font><code>X</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他の項目を隠蔽します。もし</font><font style="vertical-align: inherit;">というフィールドまたはメソッドが含まれている場合</font><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">のフィールド</font><font style="vertical-align: inherit;">がそれを支配します。
</font></font><code>X</code><font style="vertical-align: inherit;"></font><code>log.Logger</code><font style="vertical-align: inherit;"></font><code>Command</code><font style="vertical-align: inherit;"></font><code>Command</code><font style="vertical-align: inherit;"></font><code>Job</code><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第二に、同じネストレベルに同じ名前が出現する場合、通常はエラーになります。</font><font style="vertical-align: inherit;">構造体に という別のフィールドまたはメソッドが含まれている</font></font><code>log.Logger</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">場合、埋め込みは誤りとなります</font><font style="vertical-align: inherit;">。ただし、重複する名前が型定義以外のプログラムで一切言及されていない場合は問題ありません。この修飾子は、外部から埋め込まれた型への変更に対する保護を提供します。つまり、別のサブタイプの別のフィールドと競合するフィールドが追加されても、どちらのフィールドも使用されていない場合は問題ありません。
</font></font><code>Job</code><font style="vertical-align: inherit;"></font><code>Logger</code><font style="vertical-align: inherit;"></font></p>


<h2 id="concurrency"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">並行性</font></font><a href="https://go.dev/doc/effective_go#concurrency" class="Article-idLink" aria-label="同時実行へ進む"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>

<h3 id="sharing"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コミュニケーションで共有する</font></font><a href="https://go.dev/doc/effective_go#sharing" class="Article-idLink" aria-label="共有へ進む"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
並行プログラミングは大きなトピックであり、ここでは Go 特有のハイライトのみを説明するスペースがあります。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの環境における並行プログラミングは、共有変数への正しいアクセスを実装するために必要な微妙な点によって困難になります。Go言語では、共有値はチャネルを介して渡され、実際には別々の実行スレッド間で積極的に共有されることはありません。ある時点で値にアクセスできるのは1つのゴルーチンだけです。設計上、データ競合は発生しません。この考え方を奨励するために、私たちはそれをスローガンにまとめました。
</font></font></p>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メモリを共有することで通信するのではなく、通信することでメモリを共有します。
</font></font></blockquote>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このアプローチは行き過ぎてしまう可能性があります。参照カウントは、例えば整数変数をミューテックスで囲むことで実現するのが最適かもしれません。しかし、高レベルのアプローチとして、チャネルを使用してアクセスを制御することで、明確で正確なプログラムを作成しやすくなります。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このモデルを考える一つの方法は、1つのCPUで実行される典型的なシングルスレッドプログラムを考えることです。このプログラムには同期プリミティブは必要ありません。次に、同様のインスタンスをもう一つ実行してみましょう。こちらも同期は必要ありません。次に、これら2つのインスタンスを通信させます。通信が同期装置であれば、他の同期は必要ありません。例えば、Unixパイプラインはこのモデルに完全に適合します。Goの並行性へのアプローチは、HoareのCommunicating Sequential Processes（CSP）に由来しますが、Unixパイプの型安全な一般化とも言えます。
</font></font></p>

<h3 id="goroutines"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ゴルーチン</font></font><a href="https://go.dev/doc/effective_go#goroutines" class="Article-idLink" aria-label="ゴルーチンへ"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スレッド、コルーチン、プロセスといった既存の用語が誤った意味合いを持つため、
</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ゴルーチン</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
と呼ばれます。ゴルーチンのモデルはシンプルです。つまり、同じアドレス空間にある他のゴルーチンと並行して実行される関数です。ゴルーチンは軽量で、スタック領域の割り当て以外にほとんどコストはかかりません。スタックは最初は小さいため、コストは低く、必要に応じてヒープ領域を割り当て（そして解放し）ることで拡張されます。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ゴルーチンは複数のOSスレッドに多重化されているため、I/O待機中など、あるスレッドがブロックされても、他のスレッドは引き続き実行されます。この設計により、スレッドの作成と管理に伴う多くの複雑な処理が隠蔽されます。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数またはメソッド呼び出しの前に</font></font><code>go</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
キーワードを付けると、その呼び出しは新しいゴルーチンで実行されます。呼び出しが完了すると、ゴルーチンは何もせずに終了します。（これは、Unixシェルで
</font></font><code>&amp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンドをバックグラウンドで実行する場合の表記法に似ています。）
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">go list.Sort() // list.Sort を同時に実行します。待機しないでください。
</font></font></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数リテラルは、goroutine 呼び出しで便利です。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func Announce(メッセージ文字列, 遅延時間.Duration) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ゴー関数（）{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        time.Sleep(遅延)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        fmt.Println(メッセージ)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }() // 括弧に注意してください - 関数を呼び出す必要があります。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go では、関数リテラルはクロージャです。実装により、関数によって参照される変数はアクティブである限り存続することが保証されます。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの例は、関数が完了を通知する方法がないため、あまり実用的ではありません。そのためにはチャネルが必要です。
</font></font></p>

<h3 id="channels"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チャンネル</font></font><a href="https://go.dev/doc/effective_go#channels" class="Article-idLink" aria-label="チャンネルへ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マップと同様に、チャネルは で割り当てられ</font></font><code>make</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、その結果の値は基になるデータ構造への参照として機能します。オプションの整数パラメータが指定された場合、チャネルのバッファサイズが設定されます。デフォルトは0で、バッファなしまたは同期チャネルです。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ci := make(chan int) // バッファリングされていない整数のチャネル</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cj := make(chan int, 0) // バッファリングされていない整数のチャネル</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cs := make(chan *os.File, 100) // ファイルへのポインタのバッファリングされたチャネル</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バッファなしチャネルは、通信 (値の交換) と同期を組み合わせて、2 つの計算 (ゴルーチン) が既知の状態であることを保証します。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チャネルを使った便利なイディオムはたくさんあります。まずは一つ例を挙げましょう。前のセクションでは、バックグラウンドでソートを実行しました。チャネルを使うと、起動元のゴルーチンがソートの完了を待つことができます。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c := make(chan int) // チャネルを割り当てます。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// ゴルーチンでソートを開始します。完了したら、チャネルで信号を送信します。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ゴー関数（）{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    リスト.ソート()</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    c &lt;- 1 // シグナルを送信します。値は重要ではありません。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}()</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しばらくの間何かを行う()</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;-c // ソートが完了するまで待機し、送信された値を破棄します。</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
受信側は、受信するデータがあるまで常にブロックします。チャネルがバッファリングされていない場合、送信側は受信側が値を受信するまでブロックします。チャネルにバッファリングされている場合、送信側は値がバッファにコピーされるまでブロックします。バッファがいっぱいの場合は、受信側が値を取得するまで待機することになります。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バッファ付きチャネルはセマフォのように使用でき、例えばスループットを制限するのに利用できます。この例では、受信リクエストは に渡され</font></font><code>handle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、 はチャネルに値を送信し、リクエストを処理します。その後、チャネルから値を受信し、次のコンシューマのために「セマフォ」を準備します。チャネルバッファの容量によって、 への同時呼び出し数が制限されます</font></font><code>process</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">var sem = make(chan int, MaxOutstanding)</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
function handle(r *Request) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    sem &lt;- 1 // アクティブキューが空になるまで待機します。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    process(r) // 時間がかかる場合があります。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    &lt;-sem // 完了。次のリクエストを実行できるようにします。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func Serve(queue chan *Request) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    のために {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要求:= &lt;-キュー</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        go handle(req) // ハンドルが完了するまで待機しません。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"></font><code>MaxOutstanding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ハンドラが実行される</font><font style="vertical-align: inherit;">
と</font></font><code>process</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、既存のハンドラの 1 つが終了してバッファから受信するまで、それ以上のハンドラはいっぱいになったチャネル バッファへの送信をブロックします。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、この設計には問題があります。それは、</font></font><code>Serve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
受信リクエストごとに新しいゴルーチンが作成されるのですが、</font></font><code>MaxOutstanding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一度に実行できるのはそのうちの1つだけであるということです。その結果、リクエストがあまりにも速く到着すると、プログラムは無制限にリソースを消費する可能性があります。この欠陥は、</font></font><code>Serve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ゴルーチンの作成をゲートするように変更することで解決できます。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func Serve(queue chan *Request) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    req := 範囲キュー {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        sem &lt;- 1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        ゴー関数（）{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            プロセス(必須)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            &lt;-sem</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        }()</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(Go バージョン 1.22 より前では、このコードにバグがあることに注意してください。ループ変数はすべての goroutine で共有されます。詳細については、 </font></font><a href="https://go.dev/wiki/LoopvarExperiment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go wiki を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参照してください。)
</font></font></p>

<p><font style="vertical-align: inherit;"></font><code>handle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リソースを効率的に管理する別の方法は、リクエストチャネルから読み込みを行う</font><font style="vertical-align: inherit;">
固定数のゴルーチンを起動することです。ゴルーチンの数によって、同時呼び出しの数が制限されます</font></font><code>process</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。この</font></font><code>Serve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数は、終了を指示するチャネルも受け入れます。ゴルーチンを起動した後、そのチャネルからの受信をブロックします。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func handle(queue chan *Request) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    r := 範囲キュー {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        プロセス(r)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func Serve(clientRequests chan *Request, quit chan bool) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    // ハンドラーの開始</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    i := 0; i &lt; MaxOutstanding; i++ {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        go handle(クライアントリクエスト)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    &lt;-quit // 終了するように指示されるまで待機します。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<h3 id="chan_of_chan"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チャネルのチャネル</font></font><a href="https://go.dev/doc/effective_go#chan_of_chan" class="Article-idLink" aria-label="chan_of_chanへ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go言語の最も重要な特性の一つは、チャネルが他の値と同様に割り当てたり渡したりできるファーストクラスの値であるということです。この特性は、安全な並列デマルチプレックス処理を実装するためによく使用されます。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前のセクションの例では、</font></font><code>handle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リクエストに対する理想的なハンドラは定義されていませんでしたが、処理対象の型は定義されていませんでした。その型に応答用のチャネルが含まれている場合、各クライアントは応答に独自のパスを提供できます。以下は、型 の概略的な定義です</font></font><code>Request</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リクエスト構造体型{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    引数 []int</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    f 関数([]int) int</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    結果Chan chan int</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クライアントは、関数とその引数、および応答を受信するためのリクエスト オブジェクト内のチャネルを提供します。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数 sum(a []int) (s int) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    _ の場合、v := 範囲 a {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        s += v</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    戻る</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リクエスト:=&amp;Request{[]int{3, 4, 5}, sum, make(chan int)}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// リクエストを送信する</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
clientRequests &lt;- リクエスト</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// 応答を待ちます。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fmt.Printf("回答: %d\n", &lt;-request.resultChan)</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サーバー側では、ハンドラー関数のみが変更になります。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func handle(queue chan *Request) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    req := 範囲キュー {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        req.resultChan &lt;- req.f(req.args)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現実的にするにはまだやるべきことがたくさんあるのは明らかですが、このコードはレート制限のある並列の非ブロッキング RPC システムのフレームワークであり、ミューテックスは見当たりません。
</font></font></p>

<h3 id="parallel"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">並列化</font></font><a href="https://go.dev/doc/effective_go#parallel" class="Article-idLink" aria-label="平行移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのアイデアのもう一つの応用は、複数のCPUコア間で計算を並列化することです。計算を独立して実行できる個別の部分に分割できる場合、各部分が完了したときに信号を送るチャネルを使用して並列化できます。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この理想的な例のように、アイテムのベクトルに対して実行するコストのかかる操作があり、各アイテムに対する操作の値が独立しているとします。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベクター型 []float64</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// v[i]、v[i+1]、…v[n-1]まで演算を適用します。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func (v Vector) DoSome(i, n int, u Vector, c chan int) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    の場合; i &lt; n; i++ {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        v[i] += u.Op(v[i])</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    c &lt;- 1 // この部分が完了したことを通知する</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ループ内で各要素をCPUごとに1つずつ独立して起動します。各要素は任意の順序で完了できますが、順序は重要ではありません。すべてのゴルーチンを起動した後、チャネルをドレインすることで完了信号をカウントするだけです。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const numCPU = 4 // CPUコアの数</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func (v Vector) DoAll(u Vector) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    c := make(chan int, numCPU) // バッファリングはオプションですが、適切です。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    i := 0; i &lt; numCPU; i++ {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        go v.DoSome(i*len(v)/numCPU, (i+1)*len(v)/numCPU, u, c)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    // チャネルをドレインします。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    i := 0; i &lt; numCPU; i++ {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        &lt;-c // 1つのタスクが完了するまで待機します</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    // すべて完了しました。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
numCPUに定数値を作成する代わりに、ランタイムに適切な値を尋ねることができます。この関数は</font></font><code><a href="https://go.dev/pkg/runtime#NumCPU">runtime.NumCPU</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マシンのハードウェアCPUコアの数を返すので、次のように記述できます。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">var numCPU = ランタイム.NumCPU()
</font></font></pre>
<p><font style="vertical-align: inherit;"></font><code><a href="https://go.dev/pkg/runtime#GOMAXPROCS">runtime.GOMAXPROCS</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">また、Goプログラムが同時に実行できるコアの数をユーザーが指定した数を取得（または設定）する</font><font style="vertical-align: inherit;">
関数もあります
。この関数のデフォルトは です</font></font><code>runtime.NumCPU</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が、同様の名前のシェル環境変数を設定するか、関数を正の数で呼び出すことで上書きできます。0で呼び出すと、単に値を問い合わせるだけです。したがって、ユーザーのリソース要求を尊重したい場合は、次のように記述します。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">var numCPU = ランタイム.GOMAXPROCS(0)
</font></font></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
並行性（プログラムを独立して実行されるコンポーネントとして構成すること）と並列性（複数のCPUで効率を高めるために計算を並列に実行すること）の概念を混同しないように注意してください。Goの並行性機能により、一部の問題を並列計算として簡単に構成できますが、Goは並行言語であり、並列言語ではありません。また、すべての並列化問題がGoのモデルに当てはまるわけではありません。この違いに関する議論については、
</font></font><a href="https://go.dev/blog/concurrency-is-not-parallelism"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このブログ記事</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で引用されている講演をご覧ください。

</font></font></p><h3 id="leaky_buffer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リークバッファ</font></font><a href="https://go.dev/doc/effective_go#leaky_buffer" class="Article-idLink" aria-label="leaky_bufferへ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
並行プログラミングのツールは、非並行的なアイデアの表現を容易にします。RPCパッケージから抽象化された例を以下に示します。クライアントのゴルーチンは、何らかのソース（おそらくネットワーク）からデータを受信するためにループ処理を実行します。バッファの割り当てと解放を回避するため、空きリストを保持し、バッファ付きチャネルを使用してそれを表現します。チャネルが空の場合、新しいバッファが割り当てられます。メッセージバッファの準備が整うと、 でサーバーに送信されます
</font></font><code>serverChan</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">var freeList = make(chan *Buffer, 100)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
var serverChan = make(chan *Buffer)</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数クライアント() {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    のために {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        var b *バッファ</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        // 利用可能な場合はバッファを取得し、そうでない場合は割り当てます。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        選択{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        b = &lt;-freeListの場合:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            // 1 つ取得しました。これ以上何もする必要はありません。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        デフォルト：</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            // 空きがないので、新しいものを割り当てます。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            b = 新しい(バッファ)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        load(b) // ネットから次のメッセージを読み取ります。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        serverChan &lt;- b // サーバーに送信します。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サーバー ループはクライアントから各メッセージを受信し、処理して、バッファをフリー リストに返します。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数サーバー() {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    のために {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        b := &lt;-serverChan // 作業を待機します。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        プロセス(b)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        // 空きがあればバッファを再利用します。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        選択{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        freeList &lt;- bの場合:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            // バッファは空きリストにあります。これ以上何もする必要はありません。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        デフォルト：</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            // 空きリストがいっぱいです。そのまま続行します。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クライアントは からバッファを取得しようとします</font></font><code>freeList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。利用可能なバッファがない場合は、新しいバッファを割り当てます。サーバーの への送信は、リストがいっぱいでない限り、バッファをフリーリストに戻し</font></font><code>freeList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます</font></font><code>b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。リストがいっぱいの場合は、バッファは破棄され、ガベージコレクタによって回収されます。(文内</font></font><code>default</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の節は、</font></font><code>select</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他のケースが準備できていない場合にのみ実行されます。つまり、 は</font></font><code>selects</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブロックされません。) この実装は、バッファリングされたチャネルとガベージコレクタによる記録管理を利用して、わずか数行でリーキーバケットのフリーリストを構築します。
</font></font></p>

<h2 id="errors"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エラー</font></font><a href="https://go.dev/doc/effective_go#errors" class="Article-idLink" aria-label="エラーへ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ライブラリルーチンは、多くの場合、呼び出し元に何らかのエラー情報を返す必要があります。前述のように、Go の複数値戻り値により、通常の戻り値に加えて詳細なエラー情報を簡単に返すことができます。この機能を利用して詳細なエラー情報を提供するのは良い方法です。例えば、後ほど説明するように、は失敗時にポインタ</font></font><code>os.Open</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を返すだけでなく</font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、何が間違っていたかを示すエラー値も返します。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
慣例により、エラーには</font></font><code>error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、単純な組み込みインターフェースである 型が存在します。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型エラーインターフェース{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    エラー()文字列</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ライブラリ開発者は、このインターフェースをより豊富なモデルで実装することで、エラーの確認だけでなく、何らかのコンテキストを提供することも可能です。前述の通り、通常の</font></font><code>*os.File</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
戻り値に加えて、</font></font><code>os.Open</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エラー値も返します。ファイルが正常に開かれた場合、エラーは ですが</font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、問題が発生した場合は が保持されます
</font></font><code>os.PathError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// PathErrorはエラーを記録し、操作と</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// 原因となったファイル パス。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PathError構造体型{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    Op 文字列 // "open"、"unlink" など</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    パス文字列 // 関連付けられたファイル。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    Err エラー // システム コールによって返されます。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func (e *PathError) Error() 文字列 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    e.Op + " " + e.Path + ": " + e.Err.Error() を返します</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>
<p>
<code>PathError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font><code>Error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次のような文字列を生成します:
</font></font></p>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/etc/passwx を開く: そのようなファイルまたはディレクトリはありません
</font></font></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このようなエラーには、問題のあるファイル名、操作、およびそれが引き起こしたオペレーティング システム エラーが含まれており、エラーの原因となった呼び出しから離れた場所で印刷されても役立ちます。これは、単に「そのようなファイルまたはディレクトリはありません」というメッセージよりも、はるかに多くの情報を提供します。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
可能であれば、エラー文字列には、エラーを生成した操作やパッケージ名をプレフィックスとして付けるなど、その発生源を識別できるようにする必要があります。例えば、パッケージ の場合
</font></font><code>image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、不明な形式によるデコードエラーの文字列表現は「image: 不明な形式」となります。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
正確なエラーの詳細を知りたい呼び出し元は、型スイッチまたは型アサーションを使用して特定のエラーを検索し、詳細を抽出できます。</font></font><code>PathErrors</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これには、内部</font></font><code>Err</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フィールドを調べて回復可能なエラーを検出することも含まれます。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">try := 0; try &lt; 2; try++ {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ファイル、エラー = os.Create(ファイル名)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    エラー == nilの場合{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        戻る</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    eの場合、ok := err.(*os.PathError); ok &amp;&amp; e.Err == syscall.ENOSPC {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        deleteTempFiles() // いくらかのスペースを回復します。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        続く</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    戻る</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでの2番目の文は、別の</font><a href="https://go.dev/doc/effective_go#interface_conversions"><font style="vertical-align: inherit;">型アサーション</font></a></font><code>if</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です</font><font style="vertical-align: inherit;">。失敗した場合、</font><font style="vertical-align: inherit;">は偽となり、</font><font style="vertical-align: inherit;">
になります</font><font style="vertical-align: inherit;">。成功した場合、  </font><font style="vertical-align: inherit;">は真となり、これはエラーが 型であったことを意味します</font><font style="vertical-align: inherit;">。そして も型であり</font><font style="vertical-align: inherit;">、これを調べることでエラーに関する詳細情報を得ることができます。
</font></font><a href="https://go.dev/doc/effective_go#interface_conversions"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><code>ok</code><font style="vertical-align: inherit;"></font><code>e</code><font style="vertical-align: inherit;"></font><code>nil</code><font style="vertical-align: inherit;"></font><code>ok</code><font style="vertical-align: inherit;"></font><code>*os.PathError</code><font style="vertical-align: inherit;"></font><code>e</code><font style="vertical-align: inherit;"></font></p>

<h3 id="panic"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パニック</font></font><a href="https://go.dev/doc/effective_go#panic" class="Article-idLink" aria-label="パニックになる"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
呼び出し元にエラーを報告する一般的な方法は、
</font></font><code>error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加の戻り値として を返すことです。標準的な
</font></font><code>Read</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッドはよく知られたインスタンスであり、バイト数と を返します</font></font><code>error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。しかし、エラーが回復不能な場合はどうなるでしょうか？プログラムが続行できなくなる場合もあります。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この目的のために、プログラムを停止させる実行時エラーを生成する組み込み関数が</font></font><code>panic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
用意されています（ただし、次のセクションを参照してください）。この関数は、任意の型（多くの場合、文字列）の引数を1つ受け取り、プログラム終了時にその値を表示します。また、無限ループからの脱出など、何か起こり得ないことが発生したことを示す手段にもなります。
</font></font></p>


<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// ニュートン法を使用した立方根の簡単な実装。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CubeRoot関数(x float64) float64 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    z := x/3 // 任意の初期値</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    i := 0; i &lt; 1e6; i++ {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        前z := z</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        z -= (z*z*zx) / (3*z*z)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        veryClose(z, prevz) の場合 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            zを返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    // 100 万回の反復処理を行っても収束しません。何か問題が発生しています。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    panic(fmt.Sprintf("CubeRoot(%g)は収束しませんでした", x))</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは単なる一例ですが、実際のライブラリ関数ではこのような状況を避けるべきです</font></font><code>panic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。問題が隠蔽または回避できる場合は、プログラム全体を停止させるよりも、そのまま実行を継続する方が常に賢明です。反例としては、初期化時が挙げられます。ライブラリが実際に自己起動できない場合、いわばパニックに陥るのも当然と言えるでしょう。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">var user = os.Getenv("USER")</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数init() {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ユーザー == "" の場合 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        パニック("$USERに値がありません")</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<h3 id="recover"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回復する</font></font><a href="https://go.dev/doc/effective_go#recover" class="Article-idLink" aria-label="回復へ進む"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
が呼び出されると</font></font><code>panic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（スライスのインデックスが範囲外の場合や型アサーションの失敗などの実行時エラーが発生した場合など、暗黙的に呼び出される場合も含む）、現在の関数の実行を直ちに停止し、ゴルーチンのスタックの巻き戻しを開始し、その過程で遅延関数を実行します。巻き戻しがゴルーチンのスタックの先頭に達した場合、プログラムは終了します。ただし、組み込み関数を使用して</font></font><code>recover</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ゴルーチンの制御を取り戻し、通常の実行を再開することは可能です。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
を呼び出すと、</font></font><code>recover</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アンワインドが停止し、 に渡された引数が返されます</font></font><code>panic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。アンワインド中に実行されるコードは遅延関数内だけなので、</font></font><code>recover</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
は遅延関数内でのみ役立ちます。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
の 1 つの応用は</font></font><code>recover</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、実行中の他の goroutine を強制終了せずに、サーバー内の失敗した goroutine をシャットダウンすることです。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func server(workChan &lt;-chan *Work) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    仕事の場合:=範囲workChan{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        安全に行きなさい。仕事をしなさい。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数safelyDo(work *Work) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    遅延関数（）{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        err := recover() の場合; err != nil {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            log.Println("作業に失敗しました:", err)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }()</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    仕事をする</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例では、</font></font><code>do(work)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パニックが発生した場合、結果がログに記録され、ゴルーチンは他の処理に影響を与えることなく正常に終了します。遅延クロージャ内で他に何もする必要はありません。呼び出しによって</font></font><code>recover</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件が完全に処理されます。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">遅延関数から直接呼び出されない限り、</font></font><code>recover</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">常に が返される</font><font style="vertical-align: inherit;">
ため、遅延コードは</font><font style="vertical-align: inherit;">、と を使用するライブラリルーチン</font><font style="vertical-align: inherit;">を失敗することなく呼び出すことができます。例えば、 の遅延関数は、</font><font style="vertical-align: inherit;">を呼び出す前にログ関数を呼び出す場合があり</font><font style="vertical-align: inherit;">、そのログコードはパニック状態の影響を受けずに実行されます。
</font></font><code>nil</code><font style="vertical-align: inherit;"></font><code>panic</code><font style="vertical-align: inherit;"></font><code>recover</code><font style="vertical-align: inherit;"></font><code>safelyDo</code><font style="vertical-align: inherit;"></font><code>recover</code><font style="vertical-align: inherit;"></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
回復パターンを導入することで、</font></font><code>do</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数（およびそれが呼び出すものすべて）は を呼び出すことで、あらゆる問題からスムーズに抜け出すことができます。この考え方を活用すれば、複雑なソフトウェアにおけるエラー処理を簡素化できます。ローカルエラー型を で</font><font style="vertical-align: inherit;">呼び出して解析エラーを報告する、</font></font><code>panic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">理想的なパッケージの例を見てみましょう。 </font><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">メソッド、関数</font><font style="vertical-align: inherit;">の定義を以下に示します</font><font style="vertical-align: inherit;">。
</font></font><code>regexp</code><font style="vertical-align: inherit;"></font><code>panic</code><font style="vertical-align: inherit;"></font><code>Error</code><font style="vertical-align: inherit;"></font><code>error</code><font style="vertical-align: inherit;"></font><code>Compile</code><font style="vertical-align: inherit;"></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// エラーは解析エラーの型であり、エラー インターフェイスを満たします。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エラー文字列型</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func (e Error) Error() 文字列 {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    文字列を返す(e)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// errorは*Regexpのメソッドであり、解析エラーを報告します。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// エラーでパニックになります。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func (正規表現 *正規表現) error(エラー文字列) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    パニック(エラー(err))</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
// コンパイルすると、正規表現の解析された表現が返されます。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func Compile(str string) (regexp *Regexp, err error) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    正規表現 = new(正規表現)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    // 解析エラーが発生した場合、doParse はパニックになります。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    遅延関数（）{</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        e := recover() の場合; e != nil {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            regexp = nil // 戻り値をクリアします。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            err = e.(Error) // 解析エラーでない場合は再度パニックになります。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }()</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    regexp.doParse(str), nil を返す</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パニックが発生した場合</font></font><code>doParse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、リカバリブロックは戻り値を に設定します</font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。遅延関数は名前付き戻り値を変更できるからです。次に、 への代入において</font></font><code>err</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、 がローカル型 を持っているかどうかをアサートすることで、問題が解析エラーであったかどうかを確認します</font></font><code>Error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。そうでない場合、型アサーションは失敗し、実行時エラーが発生します。このエラーは、何も中断されなかったかのようにスタックの巻き戻しを続行します。このチェックは、インデックスが範囲外になるなど、予期せぬ事態が発生した場合、 と を使用して</font></font><code>panic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解析</font></font><code>recover</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エラーを処理しているにもかかわらず、コードが失敗することを意味します。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エラー処理が導入されているため、</font></font><code>error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッド (型にバインドされたメソッドなので、組み込み</font></font><code>error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型と同じ名前を持つことは問題なく、むしろ自然です) を使用すると、手動で解析スタックをアンワインドする必要なく、解析エラーを簡単に報告できます。
</font></font></p>

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pos == 0 の場合</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    re.error("式の先頭に'*'は不正です")</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
</pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このパターンは便利ですが、パッケージ内でのみ使用する必要があります。
</font></font><code>Parse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内部</font></font><code>panic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">呼び出しを値に
変換し</font></font><code>error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、クライアントには公開しません</font></font><code>panics</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。これは従うべき良いルールです。
</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、この再パニックイディオムは、実際にエラーが発生した場合にパニック値を変更します。ただし、クラッシュレポートには元のエラーと新しいエラーの両方が表示されるため、問題の根本原因は依然として確認できます。したがって、この単純な再パニックアプローチで通常は十分です（結局のところクラッシュです）。ただし、元の値だけを表示したい場合は、予期しない問題をフィルタリングし、元のエラーで再パニックするコードをもう少し記述できます。これは読者の皆さんの課題として残しておきます。
</font></font></p>


<h2 id="web_server"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ウェブサーバー</font></font><a href="https://go.dev/doc/effective_go#web_server" class="Article-idLink" aria-label="web_server へ移動"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¶</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、Go言語で記述した完全なプログラム、Webサーバーを紹介しましょう。これは実際にはWebサーバーの一種です。Googleは、</font></font><code>chart.apis.google.com</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データをチャートやグラフに自動フォーマットするサービスを提供しています。ただし、データをクエリとしてURLに入力する必要があるため、インタラクティブに使用するのは困難です。ここで紹介するプログラムは、ある形式のデータに対して、より優れたインターフェースを提供します。短いテキストを入力すると、チャートサーバーを呼び出してQRコード（テキストをエンコードしたボックスのマトリックス）を生成します。この画像は携帯電話のカメラで撮影し、例えばURLとして解釈できるため、携帯電話の小さなキーボードにURLを入力する手間が省けます。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
完全なプログラムはこちらです。説明は後ほど。
</font></font></p>
<div class="code">

<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッケージメイン</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
輸入 （</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    "フラグ"</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    「html/テンプレート」</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    "ログ"</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    「ネット/http」</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
var addr = flag.String("addr", ":1718", "http サービス アドレス") </font></font><span class="comment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Q=17、R=18</font></font></span><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
var templ = template.Must(template.New("qr").Parse(templateStr))</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数main() {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    flag.Parse()</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    http.Handle("/", http.HandlerFunc(QR))</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    エラー:= http.ListenAndServe(*addr, nil)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    err != nil の場合</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        log.Fatal("ListenAndServe:", err)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    }</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func QR(w http.ResponseWriter, req *http.Request) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    templ.Execute(w, req.FormValue("s"))</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
}</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
const templateStr = `</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;html&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;ヘッド&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;title&gt;QRリンクジェネレーター&lt;/title&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;/head&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;本文&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{{もし 。}}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;img src="http://chart.apis.google.com/chart?chs=300x300&amp;cht=qr&amp;choe=UTF-8&amp;chl={{.}}" /&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;br&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{{.}}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;br&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;br&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{{終わり}}</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;フォームアクション="/" 名前=f メソッド="GET"&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    &lt;input maxLength=1024 size=70 name=s value="" title="テキストをQRエンコード"&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    &lt;input type=submit value="QRを表示" name=qr&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;/フォーム&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;/本文&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;/html&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
`</font></font><font></font>
</pre>
</div>


<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここまでの部分は</font></font><code>main</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">簡単に理解できるはずです。1つ目のフラグは、サーバーのデフォルトのHTTPポートを設定します。そして、テンプレート変数</font></font><code>templ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で面白いことが起こります。これは、サーバーがページを表示するために実行するHTMLテンプレートを構築します。これについては後ほど詳しく説明します。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この</font></font><code>main</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数はフラグを解析し、前述のメカニズムを使用して、関数を</font></font><code>QR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバーのルートパスにバインドします。その後、</font></font><code>http.ListenAndServe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバーを起動するために呼び出されます。サーバーの実行中はブロックされます。
</font></font></p>
<p>
<code>QR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フォーム データを含むリクエストを受信し、 という名前のフォーム値のデータに対してテンプレートを実行するだけです</font></font><code>s</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テンプレートパッケージは</font></font><code>html/template</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">強力です。このプログラムは、その機能の一部を紹介するに過ぎません。本質的には、 に渡されたデータ項目（</font></font><code>templ.Execute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この場合はフォームの値）から派生した要素を置換することで、HTMLテキストの一部を即座に書き換えます。テンプレートテキスト（ ）内では、二重中括弧で区切られた各要素がテンプレートアクションを表します。 から</font><font style="vertical-align: inherit;">
まで</font></font><code>templateStr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の部分は、</font><font style="vertical-align: inherit;">現在のデータ項目（ドット）の値が</font><font style="vertical-align: inherit;">空でない場合にのみ実行されます。つまり、文字列が空の場合、テンプレートのこの部分は抑制されます。
</font></font><code>{{if .}}</code><font style="vertical-align: inherit;"></font><code>{{end}}</code><font style="vertical-align: inherit;"></font><code>.</code><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2つのスニペットは、</font></font><code>{{.}}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テンプレートに渡されたデータ（クエリ文字列）をウェブページに表示することを示しています。HTMLテンプレートパッケージは適切なエスケープ処理を自動的に行うため、テキストは安全に表示できます。
</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テンプレート文字列の残りの部分は、ページの読み込み時に表示されるHTMLです。説明が簡潔すぎる場合は、</font><font style="vertical-align: inherit;">
テンプレートパッケージの
</font></font><a href="https://go.dev/pkg/html/template/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメントでより詳しい説明を参照してください。</font></font></a><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、数行のコードとデータ駆動型のHTMLテキストだけで、便利なウェブサーバーが完成しました。Goは、数行のコードで多くのことを実現できるほど強力です。
</font></font></p>







</article>



</main>
<footer class="Site-footer">
  <div class="Footer">
    <div class="Container">
      <div class="Footer-links">
          <div class="Footer-linkColumn">
            <a href="https://go.dev/solutions/" class="Footer-link Footer-link--primary" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              なぜ行くのか
            </font></font></a>
              <a href="https://go.dev/solutions/use-cases" class="Footer-link" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                ユースケース
              </font></font></a>
              <a href="https://go.dev/solutions/case-studies" class="Footer-link" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                ケーススタディ
              </font></font></a>
          </div>
          <div class="Footer-linkColumn">
            <a href="https://go.dev/learn/" class="Footer-link Footer-link--primary" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              始める
            </font></font></a>
              <a href="https://go.dev/play" class="Footer-link" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                遊び場
              </font></font></a>
              <a href="https://go.dev/tour/" class="Footer-link" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                ツアー
              </font></font></a>
              <a href="https://stackoverflow.com/questions/tagged/go?tab=Newest" class="Footer-link" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                スタックオーバーフロー
              </font></font></a>
              <a href="https://go.dev/help/" class="Footer-link" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                ヘルプ
              </font></font></a>
          </div>
          <div class="Footer-linkColumn">
            <a href="https://pkg.go.dev/" class="Footer-link Footer-link--primary" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              パッケージ
            </font></font></a>
              <a href="https://go.dev/pkg/" class="Footer-link" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                標準ライブラリ
              </font></font></a>
              <a href="https://pkg.go.dev/about" class="Footer-link" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                Goパッケージについて
              </font></font></a>
          </div>
          <div class="Footer-linkColumn">
            <a href="https://go.dev/project" class="Footer-link Footer-link--primary" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              について
            </font></font></a>
              <a href="https://go.dev/dl/" class="Footer-link" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                ダウンロード
              </font></font></a>
              <a href="https://go.dev/blog/" class="Footer-link" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                ブログ
              </font></font></a>
              <a href="https://github.com/golang/go/issues" class="Footer-link" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                問題トラッカー
              </font></font></a>
              <a href="https://go.dev/doc/devel/release" class="Footer-link" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                リリースノート
              </font></font></a>
              <a href="https://go.dev/brand" class="Footer-link" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                ブランドガイドライン
              </font></font></a>
              <a href="https://go.dev/conduct" class="Footer-link" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                行動規範
              </font></font></a>
          </div>
          <div class="Footer-linkColumn">
            <a href="https://www.twitter.com/golang" class="Footer-link Footer-link--primary" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              接続する
            </font></font></a>
              <a href="https://www.twitter.com/golang" class="Footer-link" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                ツイッター
              </font></font></a>
              <a href="https://github.com/golang" class="Footer-link" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                GitHub
              </font></font></a>
              <a href="https://invite.slack.golangbridge.org/" class="Footer-link" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                スラック
              </font></font></a>
              <a href="https://reddit.com/r/golang" class="Footer-link" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                r/golang
              </font></font></a>
              <a href="https://www.meetup.com/pro/go" class="Footer-link" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                ミートアップ
              </font></font></a>
              <a href="https://golangweekly.com/" class="Footer-link" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                Golangウィークリー
              </font></font></a>
          </div>
      </div>
    </div>
  </div>
  <div class="screen-reader-only" id="footer-description" hidden=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          新しいウィンドウで開きます。
  </font></font></div>
  <div class="Footer">
    <div class="Container Container--fullBleed">
      <div class="Footer-bottom">
        <img class="Footer-gopher" src="./効果的なGo - Goプログラミング言語_files/pilot-bust.svg" alt="ゴー・ゴーファー">
        <ul class="Footer-listRow">
          <li class="Footer-listItem">
            <a href="https://go.dev/copyright" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">著作権</font></font></a>
          </li>
          <li class="Footer-listItem">
            <a href="https://go.dev/tos" aria-describedby="footer-description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">利用規約</font></font></a>
          </li>
          <li class="Footer-listItem">
            <a href="http://www.google.com/intl/en/policies/privacy/" aria-describedby="footer-description" target="_blank" rel="noopener"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              プライバシーポリシー
            </font></font></a>
            </li>
          <li class="Footer-listItem">
            <a href="https://go.dev/s/website-issue" aria-describedby="footer-description" target="_blank" rel="noopener"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              問題を報告する
            </font></font></a>
          </li>
          <li class="Footer-listItem go-Footer-listItem">
            <button class="go-Button go-Button--text go-Footer-toggleTheme js-toggleTheme" aria-label="テーマを切り替える">
              <img data-value="auto" class="go-Icon go-Icon--inverted" height="24" width="24" src="./効果的なGo - Goプログラミング言語_files/brightness_6_gm_grey_24dp.svg" alt="システムテーマ">
              <img data-value="dark" class="go-Icon go-Icon--inverted" height="24" width="24" src="./効果的なGo - Goプログラミング言語_files/brightness_2_gm_grey_24dp.svg" alt="ダークテーマ">
              <img data-value="light" class="go-Icon go-Icon--inverted" height="24" width="24" src="./効果的なGo - Goプログラミング言語_files/light_mode_gm_grey_24dp.svg" alt="ライトテーマ">
            </button>
          </li>
        </ul>
        <a class="Footer-googleLogo" target="_blank" href="https://google.com/" rel="noopener">
          <img class="Footer-googleLogoImg" src="./効果的なGo - Goプログラミング言語_files/google-white.png" alt="Googleロゴ">
        </a>
      </div>
    </div>
  </div>
  <script src="./効果的なGo - Goプログラミング言語_files/jquery.js.ダウンロード"></script>
  <script src="./効果的なGo - Goプログラミング言語_files/carousels.js.ダウンロード"></script>
  <script src="./効果的なGo - Goプログラミング言語_files/searchBox.js.ダウンロード"></script>
  <script src="./効果的なGo - Goプログラミング言語_files/misc.js.ダウンロード"></script>
  <script src="./効果的なGo - Goプログラミング言語_files/hats.js.ダウンロード"></script>
  <script src="./効果的なGo - Goプログラミング言語_files/playground.js.ダウンロード"></script>
  <script src="./効果的なGo - Goプログラミング言語_files/godocs.js.ダウンロード"></script>
  <script async="" src="./効果的なGo - Goプログラミング言語_files/copypaste.js.ダウンロード"></script>
</footer><iframe height="0" width="0" style="display: none; visibility: hidden;" src="./効果的なGo - Goプログラミング言語_files/saved_resource.html"></iframe><script type="text/javascript" id="" charset="">(function(){var a=google_tag_manager["rm"]["30425926"](7);typeof a==="undefined"&&(a=String(Math.random()<.01),document.cookie="HaTS_BKT\x3d"+a+"; path\x3d/; max-age\x3d7776000;");a==="true"&&(a=Math.random()<.5)&&(document.cookie="HaTS_BKT\x3dfalse; path\x3d/; max-age\x3d7776000;",a=document.createElement("script"),a.src="https://www.gstatic.com/feedback/js/help/prod/service/lazy.min.js",a.type="text/javascript",document.head.appendChild(a),a.onload=function(){var b=window.help.service.Lazy.create(0,{apiKey:"AIzaSyDfBPfajByU2G6RAjUf5sjkMSSLNTj7MMc",
locale:"en-US"});b.requestSurvey({triggerId:"RLVVv5Lf10njVvnD1rP0QUpmtosS",callback:function(c){c.surveyData&&b.presentSurvey({surveyData:c.surveyData,colorScheme:1,customZIndex:1E4})}})})})();</script>
<section class="Cookie-notice js-cookieNotice Cookie-notice--visible">
  <div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">go.dev は、サービスの品質向上とトラフィック分析のため、Google の Cookie を使用しています。</font></font><a target="_blank" href="https://policies.google.com/technologies/cookies"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">詳細はこちら。</font></font></a></div>
  <div><button class="go-Button"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">わかった</font></font></button></div>
</section>




















<div id="goog-gt-tt" class="VIpgJd-yAWNEb-L7lbkb skiptranslate" style="border-radius: 12px; margin: 0 0 0 -23px; padding: 0; font-family: &#39;Google Sans&#39;, Arial, sans-serif;" data-id=""><div id="goog-gt-vt" class="VIpgJd-yAWNEb-hvhgNd"><div class=" VIpgJd-yAWNEb-hvhgNd-l4eHX-i3jM8c"><img src="./効果的なGo - Goプログラミング言語_files/24px.svg" width="24" height="24" alt=""></div><div class=" VIpgJd-yAWNEb-hvhgNd-k77Iif-i3jM8c"><div class="VIpgJd-yAWNEb-hvhgNd-IuizWc" dir="ltr">原文</div><div id="goog-gt-original-text" class="VIpgJd-yAWNEb-nVMfcd-fmcmS VIpgJd-yAWNEb-hvhgNd-axAV1"></div></div><div class="VIpgJd-yAWNEb-hvhgNd-N7Eqid ltr"><div class="VIpgJd-yAWNEb-hvhgNd-N7Eqid-B7I4Od ltr" dir="ltr"><div class="VIpgJd-yAWNEb-hvhgNd-UTujCb">この翻訳を評価してください</div><div class="VIpgJd-yAWNEb-hvhgNd-eO9mKe">いただいたフィードバックは Google 翻訳の改善に役立てさせていただきます</div></div><div class="VIpgJd-yAWNEb-hvhgNd-xgov5 ltr"><button id="goog-gt-thumbUpButton" type="button" class="VIpgJd-yAWNEb-hvhgNd-bgm6sf" title="良い翻訳" aria-label="良い翻訳" aria-pressed="false"><span id="goog-gt-thumbUpIcon"><svg width="24" height="24" viewBox="0 0 24 24" focusable="false" class="VIpgJd-yAWNEb-hvhgNd-THI6Vb NMm5M"><path d="M21 7h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 0S7.08 6.85 7 7H2v13h16c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73V9c0-1.1-.9-2-2-2zM7 18H4V9h3v9zm14-7l-3 7H9V8l4.34-4.34L12 9h9v2z"></path></svg></span><span id="goog-gt-thumbUpIconFilled"><svg width="24" height="24" viewBox="0 0 24 24" focusable="false" class="VIpgJd-yAWNEb-hvhgNd-THI6Vb NMm5M"><path d="M21 7h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 0S7.08 6.85 7 7v13h11c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73V9c0-1.1-.9-2-2-2zM5 7H1v13h4V7z"></path></svg></span></button><button id="goog-gt-thumbDownButton" type="button" class="VIpgJd-yAWNEb-hvhgNd-bgm6sf" title="悪い翻訳" aria-label="悪い翻訳" aria-pressed="false"><span id="goog-gt-thumbDownIcon"><svg width="24" height="24" viewBox="0 0 24 24" focusable="false" class="VIpgJd-yAWNEb-hvhgNd-THI6Vb NMm5M"><path d="M3 17h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 24s7.09-6.85 7.17-7h5V4H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2zM17 6h3v9h-3V6zM3 13l3-7h9v10l-4.34 4.34L12 15H3v-2z"></path></svg></span><span id="goog-gt-thumbDownIconFilled"><svg width="24" height="24" viewBox="0 0 24 24" focusable="false" class="VIpgJd-yAWNEb-hvhgNd-THI6Vb NMm5M"><path d="M3 17h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 24s7.09-6.85 7.17-7V4H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2zm16 0h4V4h-4v13z"></path></svg></span></button></div></div><div id="goog-gt-votingHiddenPane" class="VIpgJd-yAWNEb-hvhgNd-aXYTce"><form id="goog-gt-votingForm" action="https://translate.googleapis.com/translate_voting?client=te_lib" method="post" target="votingFrame" class="VIpgJd-yAWNEb-hvhgNd-aXYTce"><input type="text" name="sl" id="goog-gt-votingInputSrcLang"><input type="text" name="tl" id="goog-gt-votingInputTrgLang"><input type="text" name="query" id="goog-gt-votingInputSrcText"><input type="text" name="gtrans" id="goog-gt-votingInputTrgText"><input type="text" name="vote" id="goog-gt-votingInputVote"></form><iframe name="votingFrame" frameborder="0" src="./効果的なGo - Goプログラミング言語_files/saved_resource(1).html"></iframe></div></div></div><deepl-input-controller translate="no"><template shadowrootmode="open"><link rel="stylesheet" href="chrome-extension://cofdbpoegempjloogbagkncekinflcnj/build/content.css"><div dir="ltr" style="visibility: initial !important;"><div class="dl-input-translation-container svelte-95aucy"><div></div></div></div></template></deepl-input-controller></body></html>